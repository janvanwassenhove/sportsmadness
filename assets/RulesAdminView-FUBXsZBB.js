import{e as E,B as j,r as u,o as P,g as i,i as t,l as q,t as r,F as h,k as w,P as I,j as d,G as v,I as U,H as B,n as f,h as n}from"./vendor-BHPTlv71.js";import{s as b,_ as F}from"./index-BEMb2HgI.js";const M={class:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900"},S={class:"container mx-auto px-4 py-8"},D={class:"mb-8"},G={class:"text-4xl font-bold text-white mb-2"},N={class:"text-blue-100"},T={class:"flex justify-between items-center mb-6"},z={class:"text-2xl font-bold text-white"},H={key:0,class:"text-center py-8"},L={class:"text-white text-xl"},J={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},K={class:"flex items-start justify-between mb-4"},O={class:"flex items-center space-x-3 flex-1"},Q={class:"text-3xl"},W={class:"flex-1"},X={class:"flex items-center space-x-2 mb-1"},Y={class:"text-lg font-bold text-white"},Z={class:"text-blue-200 text-sm"},ee={class:"space-y-2 mb-4"},te={class:"flex items-center justify-between text-sm"},se={class:"text-blue-300"},oe={class:"text-white font-mono"},le={class:"flex items-center justify-between text-sm"},re={class:"text-blue-300"},ie=["onClick"],ne={class:"flex space-x-2"},ae=["onClick"],de=["onClick"],ce={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ue={class:"bg-white rounded-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto"},be={class:"text-2xl font-bold text-gray-900 mb-6"},me={class:"block text-sm font-semibold text-gray-700 mb-2"},ve=["placeholder"],ge={class:"block text-sm font-semibold text-gray-700 mb-2"},pe=["placeholder"],fe={class:"block text-sm font-semibold text-gray-700 mb-2"},xe=["value"],_e={class:"block text-sm font-semibold text-gray-700 mb-2"},ye={class:"block text-sm font-semibold text-gray-700 mb-2"},he={class:"text-xs text-gray-500 mt-1"},we={class:"flex items-center space-x-2"},$e={class:"text-sm font-semibold text-gray-700"},ke={class:"flex space-x-3 pt-4"},Ae={type:"submit",class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold transition-colors"},Ce=E({__name:"RulesAdminView",setup(Re){const{t:Ve}=j(),x=u([]),g=u(!0),c=u(!1),a=u(null),l=u({title:"",description:"",category:"general",icon:"",order_index:0,is_active:!0}),_=[{value:"basic",label:"Basic Rules"},{value:"gameplay",label:"Gameplay"},{value:"scoring",label:"Scoring"},{value:"penalties",label:"Penalties"},{value:"general",label:"General"}],p=()=>{l.value={title:"",description:"",category:"general",icon:"",order_index:0,is_active:!0},a.value=null};async function m(){g.value=!0;const{data:e,error:o}=await b.from("rules").select("*").order("order_index",{ascending:!0}).order("created_at",{ascending:!1});o?console.error("Error loading rules:",o):x.value=e||[],g.value=!1}async function $(){try{if(a.value){const{error:e}=await b.from("rules").update({title:l.value.title,description:l.value.description,category:l.value.category,icon:l.value.icon||null,order_index:l.value.order_index,is_active:l.value.is_active}).eq("id",a.value.id);if(e)throw e}else{const{error:e}=await b.from("rules").insert({title:l.value.title,description:l.value.description,category:l.value.category,icon:l.value.icon||null,order_index:l.value.order_index,is_active:l.value.is_active});if(e)throw e}c.value=!1,p(),await m()}catch(e){console.error("Error saving rule:",e),alert("Error saving rule. Please try again.")}}function k(e){a.value=e,l.value={title:e.title,description:e.description,category:e.category,icon:e.icon||"",order_index:e.order_index,is_active:e.is_active},c.value=!0}async function A(e){if(confirm("Are you sure you want to delete this rule?"))try{const{error:o}=await b.from("rules").delete().eq("id",e);if(o)throw o;await m()}catch(o){console.error("Error deleting rule:",o),alert("Error deleting rule. Please try again.")}}async function C(e){try{const{error:o}=await b.from("rules").update({is_active:!e.is_active}).eq("id",e.id);if(o)throw o;await m()}catch(o){console.error("Error updating rule status:",o),alert("Error updating rule status. Please try again.")}}function R(e){return _.find(s=>s.value===e)?.label||e}function V(e){return{basic:"bg-blue-500",gameplay:"bg-purple-500",scoring:"bg-green-500",penalties:"bg-red-500",general:"bg-gray-500"}[e]||"bg-gray-500"}return P(async()=>{await m()}),(e,o)=>(n(),i("div",M,[t("div",S,[t("div",D,[t("h1",G,r(e.$t("rulesAdmin.title")),1),t("p",N,r(e.$t("rulesAdmin.subtitle")),1)]),t("div",T,[t("h2",z,r(e.$t("rulesAdmin.manageRules")),1),t("button",{onClick:o[0]||(o[0]=s=>{c.value=!0,p()}),class:"btn btn-primary"}," + "+r(e.$t("rulesAdmin.addRule")),1)]),g.value?(n(),i("div",H,[t("div",L,r(e.$t("common.loading")),1)])):(n(),i("div",J,[(n(!0),i(h,null,w(x.value,s=>(n(),i("div",{key:s.id,class:f(["bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 transition-all duration-300",s.is_active?"hover:bg-white/15":"opacity-60"])},[t("div",K,[t("div",O,[t("div",Q,r(s.icon||"ðŸ“‹"),1),t("div",W,[t("div",X,[t("h3",Y,r(s.title),1),t("span",{class:f(["text-xs px-2 py-1 rounded-full text-white font-semibold",V(s.category)])},r(R(s.category)),3)]),t("p",Z,r(s.description),1)])])]),t("div",ee,[t("div",te,[t("span",se,r(e.$t("rulesAdmin.orderIndex"))+":",1),t("span",oe,r(s.order_index),1)]),t("div",le,[t("span",re,r(e.$t("common.status"))+":",1),t("button",{onClick:y=>C(s),class:f(["px-2 py-1 rounded text-xs font-semibold transition-colors",s.is_active?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-red-500/20 text-red-400 hover:bg-red-500/30"])},r(s.is_active?e.$t("rulesAdmin.active"):e.$t("rulesAdmin.inactive")),11,ie)])]),t("div",ne,[t("button",{onClick:y=>k(s),class:"flex-1 py-2 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors"},r(e.$t("common.edit")),9,ae),t("button",{onClick:y=>A(s.id),class:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-semibold transition-colors"},r(e.$t("common.delete")),9,de)])],2))),128))]))]),c.value?(n(),i("div",ce,[t("div",ue,[t("h2",be,r(a.value?e.$t("rulesAdmin.editRule"):e.$t("rulesAdmin.addNewRule")),1),t("form",{onSubmit:I($,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",me,r(e.$t("rulesAdmin.ruleTitle"))+" * ",1),d(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>l.value.title=s),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:e.$t("rulesAdmin.ruleTitlePlaceholder")},null,8,ve),[[v,l.value.title]])]),t("div",null,[t("label",ge,r(e.$t("rulesAdmin.ruleDescription"))+" * ",1),d(t("textarea",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.value.description=s),required:"",rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:e.$t("rulesAdmin.ruleDescriptionPlaceholder")},null,8,pe),[[v,l.value.description]])]),t("div",null,[t("label",fe,r(e.$t("rulesAdmin.category"))+" * ",1),d(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>l.value.category=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(n(),i(h,null,w(_,s=>t("option",{key:s.value,value:s.value},r(s.label),9,xe)),64))],512),[[U,l.value.category]])]),t("div",null,[t("label",_e,r(e.$t("rulesAdmin.iconEmoji")),1),d(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>l.value.icon=s),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ðŸ“‹ (emoji)"},null,512),[[v,l.value.icon]])]),t("div",null,[t("label",ye,r(e.$t("rulesAdmin.orderIndex")),1),d(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>l.value.order_index=s),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"},null,512),[[v,l.value.order_index,void 0,{number:!0}]]),t("p",he,r(e.$t("rulesAdmin.orderIndexHelp")),1)]),t("div",null,[t("label",we,[d(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>l.value.is_active=s),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[B,l.value.is_active]]),t("span",$e,r(e.$t("rulesAdmin.isActive")),1)])]),t("div",ke,[t("button",Ae,r(a.value?e.$t("common.update"):e.$t("common.create")),1),t("button",{type:"button",onClick:o[7]||(o[7]=s=>{c.value=!1,p()}),class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-semibold transition-colors"},r(e.$t("common.cancel")),1)])],32)])])):q("",!0)]))}}),Pe=F(Ce,[["__scopeId","data-v-71c169f6"]]);export{Pe as default};
