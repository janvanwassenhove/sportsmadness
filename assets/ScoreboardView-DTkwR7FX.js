import{e as wt,B as St,r as m,a as b,w as J,o as kt,f as Tt,g as n,l as x,i as s,t as a,u as h,n as u,F as E,k as I,m as be,q as At,h as r}from"./vendor-BHPTlv71.js";import{a as Et,s as T,_ as Bt}from"./index-BEMb2HgI.js";import{S as y}from"./soundManager-CcbvAGRv.js";const Ct={key:0,class:"flex items-center justify-center h-screen"},$t={class:"text-4xl font-bold animate-pulse"},It={key:1,class:"flex items-center justify-center h-screen text-center"},Nt={class:"mb-8"},Rt={key:0,class:"logo-bg-light w-32 h-32 mx-auto mb-4 flex items-center justify-center"},Dt=["src","alt"],Ot={key:1,class:"text-6xl mb-4"},Mt={class:"hc-title mb-4"},jt={class:"hc-body"},Pt={key:2,class:"fixed inset-0 bg-gradient-to-r from-[#121238] to-[#478dcb] flex items-center justify-center z-50"},qt={class:"text-center w-full h-full flex flex-col justify-center px-4 py-4"},Lt={key:0,class:"mb-4 lg:mb-6"},Gt={class:"text-xl lg:text-2xl xl:text-3xl font-bold text-yellow-300 mb-3 lg:mb-4 drop-shadow-lg"},Ut={class:"mx-auto bg-gradient-to-b from-yellow-600 to-yellow-800 rounded-3xl p-6 lg:p-8 max-w-3xl shadow-2xl border-6 border-yellow-500 animate-pulse"},zt={class:"bg-black rounded-2xl p-4 lg:p-6 mb-3 border-3 border-yellow-400"},Ft={class:"text-center"},Vt={class:"text-[6rem] lg:text-[8rem] xl:text-[10rem] mb-2 lg:mb-3 animate-bounce drop-shadow-2xl",style:{"animation-duration":"0.3s"}},Jt={class:"text-2xl lg:text-3xl xl:text-4xl font-bold text-yellow-300 animate-pulse mb-2 drop-shadow-lg"},Ht={class:"text-lg lg:text-xl xl:text-2xl text-yellow-200 mt-2 drop-shadow-sm"},Wt={class:"text-center text-yellow-100 font-bold text-xl lg:text-2xl xl:text-3xl animate-pulse drop-shadow-lg"},Qt={class:"text-center text-yellow-300 text-lg lg:text-xl xl:text-2xl mt-2 drop-shadow-sm"},Xt={key:3,class:"h-screen flex flex-col"},Yt={class:"header-section text-center py-2"},Zt={class:"flex items-center justify-center mb-2"},Kt={key:0,class:"logo-bg-light mr-3"},el=["src","alt"],tl={key:1,class:"text-3xl mr-3"},ll={class:"text-2xl font-bold"},ol={class:"flex items-center justify-center space-x-2"},sl={key:0,class:"fixed inset-0 flex items-center justify-center pointer-events-none z-44"},al={class:"relative text-center w-full h-full flex flex-col justify-center px-8"},nl={class:"grid grid-cols-1 xl:grid-cols-2 gap-12 w-full max-w-none px-4"},rl={key:0,class:"space-y-8"},il={class:"text-6xl lg:text-7xl xl:text-8xl font-bold text-blue-300 mb-8 drop-shadow-xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},cl={class:"space-y-8"},dl={key:0,class:"bg-green-700/95 rounded-3xl p-8 lg:p-12 border-4 border-green-300 shadow-2xl relative overflow-hidden transform hover:scale-105 transition-transform"},ul={class:"relative z-10 flex items-center justify-between text-white"},xl={class:"flex items-center space-x-6 lg:space-x-8"},ml={class:"text-8xl lg:text-9xl xl:text-[8rem] animate-bounce drop-shadow-2xl",style:{filter:"drop-shadow(0 0 30px rgba(255,255,255,0.8))"}},gl={class:"text-left"},vl={class:"text-4xl lg:text-5xl xl:text-6xl font-bold drop-shadow-xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},pl={class:"text-2xl lg:text-3xl xl:text-4xl opacity-90 drop-shadow-lg mt-2",style:{"text-shadow":"3px 3px 6px rgba(0,0,0,0.8)"}},bl={class:"text-right"},fl={key:0,class:"bg-yellow-500 text-black px-8 py-4 lg:px-10 lg:py-6 rounded-3xl text-3xl lg:text-4xl xl:text-5xl font-bold font-mono animate-pulse shadow-xl border-4 border-yellow-300"},hl={key:1,class:"bg-orange-500 text-white px-8 py-4 lg:px-10 lg:py-6 rounded-3xl text-3xl lg:text-4xl xl:text-5xl font-bold animate-bounce shadow-xl border-4 border-orange-300"},_l={key:1,class:"space-y-8"},yl={class:"text-6xl lg:text-7xl xl:text-8xl font-bold text-red-300 mb-8 drop-shadow-xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},wl={class:"space-y-8"},Sl={key:0,class:"bg-green-700/95 rounded-3xl p-8 lg:p-12 border-4 border-green-300 shadow-2xl relative overflow-hidden transform hover:scale-105 transition-transform"},kl={class:"relative z-10 flex items-center justify-between text-white"},Tl={class:"flex items-center space-x-6 lg:space-x-8"},Al={class:"text-8xl lg:text-9xl xl:text-[8rem] animate-bounce drop-shadow-2xl",style:{filter:"drop-shadow(0 0 30px rgba(255,255,255,0.8))"}},El={class:"text-left"},Bl={class:"text-4xl lg:text-5xl xl:text-6xl font-bold drop-shadow-xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},Cl={class:"text-2xl lg:text-3xl xl:text-4xl opacity-90 drop-shadow-lg mt-2",style:{"text-shadow":"3px 3px 6px rgba(0,0,0,0.8)"}},$l={class:"text-right"},Il={key:0,class:"bg-yellow-500 text-black px-8 py-4 lg:px-10 lg:py-6 rounded-3xl text-3xl lg:text-4xl xl:text-5xl font-bold font-mono animate-pulse shadow-xl border-4 border-yellow-300"},Nl={key:1,class:"bg-orange-500 text-white px-8 py-4 lg:px-10 lg:py-6 rounded-3xl text-3xl lg:text-4xl xl:text-5xl font-bold animate-bounce shadow-xl border-4 border-orange-300"},Rl={key:1,class:"fixed inset-0 flex items-center justify-center pointer-events-none z-45"},Dl={class:"relative text-center w-full h-full flex flex-col justify-between px-4 py-8 lg:py-12"},Ol={class:"flex-1 flex flex-col justify-center space-y-4 lg:space-y-6 xl:space-y-8 min-h-0"},Ml={class:"text-[8rem] lg:text-[10rem] xl:text-[12rem] animate-pulse drop-shadow-2xl flex-shrink-0",style:{filter:"drop-shadow(0 0 50px rgba(255,255,255,0.9)) drop-shadow(0 0 100px rgba(255,255,255,0.5))"}},jl={class:"text-2xl lg:text-4xl xl:text-5xl font-bold px-8 py-4 lg:px-12 lg:py-6 rounded-3xl border-4 backdrop-blur-lg bg-purple-700/90 border-purple-200 text-white shadow-2xl max-w-4xl mx-auto flex-shrink-0",style:{"box-shadow":"0 16px 64px rgba(0,0,0,0.7)"}},Pl={key:0,class:"text-lg lg:text-2xl xl:text-3xl text-purple-100 drop-shadow-xl max-w-5xl mx-auto flex-shrink-0 leading-relaxed",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.8)"}},ql={class:"flex-shrink-0 pb-4 lg:pb-8"},Ll={key:0,class:"text-2xl lg:text-3xl xl:text-4xl text-purple-100 font-semibold text-center bg-purple-800/90 rounded-2xl px-8 py-4 lg:px-12 lg:py-6 border-4 border-purple-300 shadow-2xl max-w-3xl mx-auto",style:{"box-shadow":"0 16px 64px rgba(0,0,0,0.6)"}},Gl={class:"flex items-center justify-center space-x-4 lg:space-x-6"},Ul={class:"font-mono text-4xl lg:text-5xl xl:text-6xl text-white drop-shadow-2xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},zl={key:1,class:"text-xl lg:text-2xl xl:text-3xl text-purple-200 font-semibold text-center drop-shadow-xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.8)"}},Fl={class:"flex-1 flex items-center justify-center px-4"},Vl={class:"grid grid-cols-3 gap-4 w-full h-full max-h-96"},Jl={class:"text-center flex flex-col justify-center"},Hl={class:"p-2"},Wl={key:0,class:"mb-1"},Ql={class:"flex flex-wrap justify-center gap-4 lg:gap-6"},Xl={class:"text-center"},Yl={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-2xl"},Zl={class:"text-4xl lg:text-6xl xl:text-8xl font-bold mb-4"},Kl={class:"text-8xl lg:text-9xl xl:text-[12rem] font-black mb-4"},eo={class:"text-yellow-300 text-2xl lg:text-4xl xl:text-6xl font-bold mb-4"},to={key:1,class:"space-y-2"},lo={class:"text-center flex flex-col justify-center"},oo={class:"mb-6"},so={class:"text-2xl lg:text-4xl xl:text-6xl font-bold text-white mb-4",style:{color:"grey"}},ao={class:"bg-gradient-to-r from-[#1e3a8a] to-[#1e40af] text-6xl lg:text-8xl xl:text-[8rem] font-mono text-white mb-6 px-8 py-4 rounded-2xl border-2 border-blue-300 shadow-lg"},no={class:"text-center flex flex-col justify-center"},ro={class:"p-2"},io={key:0,class:"mb-1"},co={class:"flex flex-wrap justify-center gap-4 lg:gap-6"},uo={class:"text-center"},xo={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-2xl"},mo={class:"text-4xl lg:text-6xl xl:text-8xl font-bold mb-4"},go={class:"text-8xl lg:text-9xl xl:text-[12rem] font-black mb-4"},vo={class:"text-yellow-300 text-2xl lg:text-4xl xl:text-6xl font-bold mb-4"},po={key:1,class:"space-y-2"},bo={class:"text-center py-2"},fo={class:"flex items-center justify-center space-x-2"},ho=["src","alt"],_o={key:1,class:"text-sm"},yo=["title"],wo={key:4,class:"fixed inset-0 flex items-center justify-center pointer-events-none z-50"},So={class:"relative text-center w-full h-full flex flex-col justify-center px-4 py-4"},ko={class:"text-[8rem] lg:text-[10rem] xl:text-[12rem] mb-4 lg:mb-6 animate-pulse drop-shadow-2xl",style:{filter:"drop-shadow(0 0 30px rgba(255,255,255,0.9)) drop-shadow(0 0 60px rgba(255,255,255,0.5))"}},To={class:"text-[6rem] lg:text-[8rem] xl:text-[10rem] font-bold text-yellow-300 animate-bounce drop-shadow-2xl mb-2 lg:mb-4",style:{"text-shadow":"6px 6px 12px rgba(0,0,0,0.9)",filter:"drop-shadow(0 0 30px rgba(255,255,0,0.8)) drop-shadow(0 0 60px rgba(255,255,0,0.5))"}},Ao={key:5,class:"fixed inset-0 flex items-center justify-center pointer-events-none z-50"},Eo={class:"relative text-center w-full h-full flex flex-col justify-center px-4 py-4"},Bo={class:"text-[8rem] lg:text-[10rem] xl:text-[12rem] mb-4 lg:mb-6 drop-shadow-2xl animate-pulse",style:{filter:"drop-shadow(0 0 30px rgba(255,255,255,0.9)) drop-shadow(0 0 60px rgba(255,255,255,0.5))"}},Co={class:"text-3xl lg:text-4xl xl:text-5xl font-bold px-8 py-4 lg:px-12 lg:py-6 rounded-3xl border-4 mb-4 lg:mb-6 backdrop-blur-lg bg-purple-600/90 border-purple-200 text-purple-50 shadow-2xl max-w-3xl mx-auto",style:{"box-shadow":"0 8px 32px rgba(0,0,0,0.7)"}},$o={key:0,class:"text-xl lg:text-2xl xl:text-3xl text-purple-100 mb-4 lg:mb-6 drop-shadow-lg max-w-4xl mx-auto",style:{"text-shadow":"2px 2px 4px rgba(0,0,0,0.8)"}},Io={class:"text-[6rem] lg:text-[8rem] xl:text-[10rem] font-bold text-yellow-300 animate-bounce drop-shadow-2xl mb-2 lg:mb-4",style:{"text-shadow":"6px 6px 12px rgba(0,0,0,0.9)",filter:"drop-shadow(0 0 30px rgba(255,255,0,0.8)) drop-shadow(0 0 60px rgba(255,255,0,0.5))"}},No={key:6,class:"fixed inset-0 flex items-center justify-center pointer-events-none z-50"},Ro={class:"relative text-center transform animate-bounce"},Do={class:"text-[12rem] mb-8 animate-pulse drop-shadow-2xl",style:{filter:"drop-shadow(0 0 40px rgba(255,255,255,0.9))"}},Oo={key:7,class:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50"},Mo={class:"bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20 max-w-2xl w-full mx-4"},jo={class:"text-center mb-6"},Po={class:"text-3xl font-bold text-white mb-2"},qo={class:"text-blue-200"},Lo={class:"space-y-4 max-h-96 overflow-y-auto pr-2"},Go=["onClick"],Uo={class:"flex items-center justify-between"},zo={class:"flex-1"},Fo={class:"text-xl font-bold text-white mb-2"},Vo={class:"flex items-center space-x-4 text-sm text-blue-200"},Jo={class:"ml-4"},Ho={class:"mt-6 text-center"},Wo={key:8,class:"fixed bottom-4 right-4 bg-black/80 text-white p-4 rounded-lg space-y-2 text-sm z-50"},Qo=wt({__name:"ScoreboardView",props:{id:{}},setup(Ge){const H=Ge,{t:ee}=St(),Ue=At(),w=Et(),o=m(null),S=m({}),ce=m(!0),W=m(!1),P=m(!1),Q=m([]),k=m(null),X=m(null),p=m(null),_=m(null);let B=null,A=null;const Y=m({});let N=null,R=null,fe=!1;const de=m("Not connected"),he=m("Never"),te=m(!1);function le(){R&&(clearInterval(R),R=null);const e=()=>o.value&&o.value.status==="active"?1e3:3e3,l=async()=>{if(!o.value){console.log("‚ö†Ô∏è No current match, stopping poll");return}try{console.log("üìä Polling for match updates...",o.value.id);const{data:t,error:c}=await T.from("matches").select("*").eq("id",o.value.id).single();if(c){console.error("‚ùå Polling error:",c);return}if(t){const i=Math.abs(t.time_left-o.value.time_left);if(t.score_a!==o.value.score_a||t.score_b!==o.value.score_b||(t.pc_a||0)!==(o.value.pc_a||0)||(t.pc_b||0)!==(o.value.pc_b||0)||t.status!==o.value.status||i>2||JSON.stringify(t.boosters)!==JSON.stringify(o.value.boosters)||JSON.stringify(t.cards)!==JSON.stringify(o.value.cards)){console.log("üìä Polling detected changes:",{old_scores:`${o.value.score_a} - ${o.value.score_b}`,new_scores:`${t.score_a} - ${t.score_b}`,old_pc:`${o.value.pc_a||0} - ${o.value.pc_b||0}`,new_pc:`${t.pc_a||0} - ${t.pc_b||0}`,old_time:o.value.time_left,new_time:t.time_left,time_diff:i,status:`${o.value.status} -> ${t.status}`,boosters_changed:JSON.stringify(t.boosters)!==JSON.stringify(o.value.boosters)});const g={eventType:"UPDATE",new:t,old:o.value};ue(g)}else console.log("üìä Polling: No changes detected")}}catch(t){console.error("‚ùå Polling failed:",t)}};console.log(`üìä Starting adaptive polling (${e()}ms interval)...`),R=setInterval(l,e()),l()}function _e(){R&&(console.log("üõë Stopping polling"),clearInterval(R),R=null)}function ue(e){he.value=new Date().toLocaleTimeString(),console.log("üì° *** SCOREBOARD RECEIVED UPDATE ***",e),console.log("üì° Scoreboard received real-time update:",e);const l=e.eventType||e.event_type||"UPDATE",t=e.new||e;if(e.old||o.value,console.log("üì° Normalized payload:",{eventType:l,newId:t?.id,currentMatchId:o.value?.id,willUpdate:l==="UPDATE"&&o.value?.id===t?.id,newScores:`${t?.score_a||0} - ${t?.score_b||0}`,currentScores:`${o.value?.score_a||0} - ${o.value?.score_b||0}`}),console.log("üîç DETAILED BOOSTER COMPARISON:"),console.log("üîç Old boosters structure:",JSON.stringify(o.value?.boosters,null,2)),console.log("üîç New boosters structure:",JSON.stringify(t?.boosters,null,2)),l==="UPDATE"||l==="INSERT"){console.log("üö® SCOREBOARD - Received update for match:",t.id);const c=o.value?.maddie||!1,i=o.value?.boosters,d=o.value?.score_a||0,g=o.value?.score_b||0,f=t.score_a||0,v=t.score_b||0,$=o.value?.pc_a||0,F=o.value?.pc_b||0,Z=t.pc_a||0,K=t.pc_b||0;(d!==f||g!==v)&&console.log("üî¢ SCOREBOARD - Score changed!",{old:`${d} - ${g}`,new:`${f} - ${v}`,teamA_change:f-d,teamB_change:v-g}),($!==Z||F!==K)&&console.log("üèí SCOREBOARD - PC changed!",{old:`${$} - ${F}`,new:`${Z} - ${K}`,teamA_change:Z-$,teamB_change:K-F}),console.log("üì° Updating match state:",{boosters:t.boosters,selection_active:t.boosters?.selection_active,selection_phase:t.boosters?.selection_phase,teamA:t.boosters?.teamA,teamB:t.boosters?.teamB,oldBoosters:i,scores:{old:`${d} - ${g}`,new:`${f} - ${v}`}}),xt(i,t.boosters);const ht=o.value?.time_left||0,_t=o.value?.status;o.value=t,o.value.time_left!==ht||o.value.status!==_t?Ye(o.value.time_left):z();const yt=o.value?.boosters?.selection_active===!0;console.log("üì° Match state updated, overlay should be:",yt),t.boosters&&console.log("üì° Booster state change detected:",{selection_active:t.boosters.selection_active,selection_phase:t.boosters.selection_phase,teamA_exists:!!t.boosters.teamA,teamB_exists:!!t.boosters.teamB,teamA_length:t.boosters.teamA?.length||0,teamB_length:t.boosters.teamB?.length||0}),ut(c,o.value.maddie)}}const q=m({}),D=m(null);let L=null;const C=m([]),ye=m([]),oe=m("quarter"),G=m(1),V=m(0),we=m(0);let O=null;const xe=m(0);async function ze(){try{console.log("üì° Loading boosters and maddies...");const[e,l]=await Promise.all([T.from("boosters").select("*").order("title"),T.from("maddies").select("*").order("title")]);e.error?(console.error("Error loading boosters:",e.error),console.log("üì° Boosters loading failed - some features may not work properly")):(C.value=e.data.map(t=>({id:t.id,name:t.title,icon:t.icon||"‚ö°",description:t.description,duration:t.duration})),console.log("üì° Boosters loaded:",C.value.length)),l.error?(console.error("Error loading maddies:",l.error),console.log("üì° Maddies loading failed - some features may not work properly")):(ye.value=l.data,console.log("üì° Maddies loaded:",ye.value.length))}catch(e){console.error("Error loading boosters and maddies (auth-related):",e),console.log("üì° Continuing without boosters/maddies - check RLS policies for public access")}}const M=b(()=>o.value?S.value[o.value.team_a]:null),j=b(()=>o.value?S.value[o.value.team_b]:null);b(()=>{if(!C.value.length||!o.value)return[];const e=o.value.boosters?.current_boosters?.teamA?.map(l=>l.id)||[];return C.value.map(l=>({...l,isUsed:e.includes(l.id)}))}),b(()=>{if(!C.value.length||!o.value)return[];const e=o.value.boosters?.current_boosters?.teamB?.map(l=>l.id)||[];return C.value.map(l=>({...l,isUsed:e.includes(l.id)}))});const Se=b(()=>p.value?.active||!1),ke=b(()=>k.value?.active||!1),Te=b(()=>Object.keys(q.value).length>0),Ae=b(()=>_.value?.active||X.value?.active||D.value!==null),Fe=b(()=>Se.value||ke.value||Te.value||Ae.value),Ve=b(()=>Se.value||ke.value||Te.value||Ae.value),Je=b(()=>(o.value?.boosters?.current_boosters?.teamA||o.value?.boosters?.teamA||[]).map(l=>({...l,isExpired:l.expired||!1,isActivated:l.activated||!1}))),He=b(()=>(o.value?.boosters?.current_boosters?.teamB||o.value?.boosters?.teamB||[]).map(l=>({...l,isExpired:l.expired||!1,isActivated:l.activated||!1}))),U=b(()=>o.value?{quarters_count:o.value.quarters_count||4,quarter_duration_minutes:o.value.quarter_duration_minutes||15,break_duration_minutes:o.value.break_duration_minutes||2,halftime_duration_minutes:o.value.halftime_duration_minutes||10}:null),Ee=b(()=>U.value?.quarters_count===2),We=b(()=>U.value?.quarters_count===1),Qe=b(()=>{if(!U.value)return"Game";switch(oe.value){case"quarter":return We.value?"Match":Ee.value?`${G.value}${G.value===1?"st":"nd"} Half`:`${G.value}${Xe(G.value)} Quarter`;case"break":return Ee.value?"Halftime":"Break";case"halftime":return"Halftime";case"finished":return"Game Over";default:return"Game"}});function Xe(e){const l=e%10,t=e%100;return l==1&&t!=11?"st":l==2&&t!=12?"nd":l==3&&t!=13?"rd":"th"}const se=e=>{if(!o.value?.cards?.player_penalties?.[e])return[];const l=[],t=o.value.cards.player_penalties[e],c=o.value.cards.player_info?.[e]||{};return Object.keys(t).forEach(i=>{const d=t[i],g=c[i];if(!d||!g)return;let f="GAME";if(d.expires_at!=="never"){const v=new Date,$=new Date(d.expires_at),F=Math.max(0,Math.floor(($.getTime()-v.getTime())/1e3));if(F>0){const Z=Math.floor(F/60),K=F%60;f=`${Z}:${K.toString().padStart(2,"0")}`}else return}l.push({playerId:i,playerNumber:g.number,playerName:g.name,type:d.type,timeRemaining:f})}),l},Be=e=>{const l=Math.floor(e/60),t=e%60;return`${l.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`};function Ce(){O&&clearInterval(O),console.log("üîÑ Starting scoreboard local timer"),O=setInterval(()=>{o.value&&o.value.status==="active"&&o.value.time_left>0&&(o.value.time_left--,V.value>0&&V.value--,ne(),xe.value=Date.now(),o.value.time_left<=0&&ae())},1e3)}function ae(){O&&(console.log("üîÑ Stopping scoreboard local timer"),clearInterval(O),O=null)}function Ye(e){if(o.value){const l=o.value.time_left,t=Math.abs(l-e);t>3&&console.log("üîÑ Database sync detected significant time difference:",{oldTime:l,newTime:e,timeDiff:t,threshold:5,willSync:t>5}),t>5?(console.log(`‚ö†Ô∏è Major timer correction needed - difference: ${t}s`),o.value.time_left=e,xe.value=Date.now(),ne()):xe.value=Date.now(),o.value.status==="active"&&!O?Ce():o.value.status!=="active"&&O&&ae()}}const $e=e=>{switch(e){case"active":return"bg-green-500";case"paused":return"bg-yellow-500";case"finished":return"bg-red-500";default:return"bg-gray-500"}},Ie=e=>{switch(e){case"active":return ee("scoreboard.statuses.active");case"paused":return ee("scoreboard.statuses.paused");case"finished":return ee("scoreboard.statuses.finished");default:return ee("scoreboard.statuses.pending")}},Ze=()=>{const e=o.value?.boosters?.selection_phase;if(!e)return"Preparing booster selection...";switch(e){case"ready":return"Ready to select boosters";case"team-a-first":return`${M.value?.name||"Team A"} - First Booster`;case"team-a-second":return`${M.value?.name||"Team A"} - Second Booster`;case"team-b-first":return`${j.value?.name||"Team B"} - First Booster`;case"team-b-second":return`${j.value?.name||"Team B"} - Second Booster`;case"complete":return"All boosters selected!";default:return"Booster selection in progress..."}},Ke=b(()=>{const e=o.value?.boosters,l=e?.selection_active,t=e?.selection_phase;console.log("üéØ Booster data debug:",{hasMatch:!!o.value,boosters:e,teamA:e?.teamA,teamB:e?.teamB,current_teamA:e?.current_boosters?.teamA,current_teamB:e?.current_boosters?.teamB,teamA_length:e?.teamA?.length,teamB_length:e?.teamB?.length,current_teamA_length:e?.current_boosters?.teamA?.length,current_teamB_length:e?.current_boosters?.teamB?.length,active:l,phase:t});const c=l===!0;return console.log("üé∞ Scoreboard booster overlay check:",{hasMatch:!!o.value,boosters:!!e,active:l,phase:t,shouldShow:c,debug_conditions:{active_is_true:l===!0}}),c}),Ne=b(()=>!1);function et(){te.value=!te.value,console.log("üîß Debug panel toggled:",te.value?"shown":"hidden")}function z(){if(!o.value||!U.value)return;const e=U.value,l=e.quarter_duration_minutes*60,t=e.break_duration_minutes*60,c=e.halftime_duration_minutes*60,i=e.quarters_count*l;let d=0;e.quarters_count===1?d=0:e.quarters_count===2?d=c:e.quarters_count>2&&(d=(e.quarters_count-1-1)*t+c),we.value=i+d,ne(),o.value.status==="active"?Ce():ae()}function ne(){if(!o.value||!U.value)return;const e=we.value-o.value.time_left,l=U.value,t=l.quarter_duration_minutes*60,c=l.break_duration_minutes*60,i=l.halftime_duration_minutes*60;let d=0;for(let g=1;g<=l.quarters_count;g++){if(e<=d+t){oe.value="quarter",G.value=g,V.value=t-(e-d);return}if(d+=t,g<l.quarters_count){const f=l.quarters_count===2||g===Math.floor(l.quarters_count/2)&&l.quarters_count>2,v=f?i:c;if(e<=d+v){oe.value=f?"halftime":"break",G.value=g,V.value=v-(e-d);return}d+=v}}oe.value="finished",G.value=l.quarters_count,V.value=0}async function tt(){try{if(console.log("üì° Loading current match..."),H.id){console.log("üì° Loading specific match:",H.id);try{const{data:i,error:d}=await T.from("matches").select("*").eq("id",H.id).single();if(d){console.error("Error loading specific match:",d),console.log("üì° Attempting to continue with auth-independent approach..."),await lt();return}if(i){o.value=i,console.log("üì° Specific match loaded:",i.id),console.log("üö® SCOREBOARD - Now watching match:",i.id),z();return}}catch(i){console.error("üì° Authentication-related error when loading match:",i),console.log("üì° Scoreboard should work without authentication - this may be a RLS policy issue")}}const{data:e,error:l}=await T.from("matches").select("*").in("status",["active","paused"]);if(l)console.error("Error loading running matches:",l);else if(e&&e.length>1){console.log("üì° Multiple running matches found, showing selector"),Q.value=e,P.value=!0;return}else if(e&&e.length===1){o.value=e[0],console.log("üì° Single running match loaded:",e[0].id),console.log("üö® SCOREBOARD - Now watching match:",e[0].id),z();return}const{data:t,error:c}=await T.from("matches").select("*").eq("status","pending").order("created_at",{ascending:!1});if(c)console.error("Error loading pending matches:",c);else if(t&&t.length>0){const i=t.filter(d=>{const g=d.boosters?.teamA?.length>0||d.boosters?.teamB?.length>0,f=Object.keys(d.cards||{}).length>0,v=d.score_a>0||d.score_b>0,$=d.time_left!==1800;return g||f||v||$});if(i.length>1){console.log("üì° Multiple initialized matches found, showing selector"),Q.value=i,P.value=!0;return}else if(i.length===1){o.value=i[0],z(),console.log("üì° Single initialized match loaded:",i[0].id),console.log("üö® SCOREBOARD - Now watching match:",i[0].id);return}if(t.length>1){console.log("ÔøΩ Multiple pending matches found, showing selector"),Q.value=t,P.value=!0;return}else{o.value=t[0],z(),console.log("üì° Fallback to single pending match:",t[0].id);return}}console.log("üì° No matches found to display"),o.value=null}catch(e){console.error("Error loading current match:",e),o.value=null}}async function lt(){try{console.log("üì° Loading available matches...");const{data:e,error:l}=await T.from("matches").select("*").in("status",["active","paused","pending"]).order("status",{ascending:!1}).order("created_at",{ascending:!1});if(l){console.error("Error loading available matches:",l),console.log("üì° This may be due to RLS policies requiring authentication for public scoreboard access");return}Q.value=e||[],console.log("üì° Loaded available matches:",e?.length||0),e&&e.length>1?P.value=!0:e&&e.length===1?Re(e[0]):console.log("üì° No active matches found")}catch(e){console.error("Error loading available matches (auth-related):",e),console.log("üì° Scoreboard should be publicly accessible - check RLS policies")}}function Re(e){o.value=e,P.value=!1,z(),console.log("üì° Match selected:",e.id),console.log("üö® SCOREBOARD - Now watching match:",e.id),H.id!==e.id&&Ue.replace(`/scoreboard/${e.id}`)}function ot(e){const l=S.value[e.team_a],t=S.value[e.team_b];return`${l?.name||"Team A"} vs ${t?.name||"Team B"}`}async function De(){try{console.log("üì° Loading teams...");const{data:e,error:l}=await T.from("teams").select("*");if(l){console.error("Error loading teams:",l),console.log("üì° Teams loading failed - scoreboard may show team IDs instead of names");return}const t={};e?.forEach(c=>{t[c.id]=c}),S.value=t,console.log("üì° Teams loaded:",Object.keys(t).length)}catch(e){console.error("Error loading teams (auth-related):",e),console.log("üì° Continuing without team names - check RLS policies for public access")}}async function st(){console.log("üß™ Testing real-time connection...");const e=T.channel("test-connection").on("broadcast",{event:"test"},l=>{console.log("‚úÖ Real-time is working! Received test broadcast:",l)}).subscribe(l=>{console.log("üß™ Test channel status:",l),l==="SUBSCRIBED"&&(console.log("‚úÖ Test channel subscribed successfully"),e.send({type:"broadcast",event:"test",payload:{message:"Hello from scoreboard!"}}),setTimeout(()=>{e.unsubscribe(),console.log("üß™ Test channel cleaned up")},2e3))})}function at(){console.log("üß™ Testing direct database update..."),o.value&&T.from("matches").update({last_updated:new Date().toISOString()}).eq("id",o.value.id).then(e=>{console.log("üß™ Test update result:",e)})}async function nt(){if(console.log("üîÑ Manual poll triggered"),!o.value){console.log("‚ùå No current match to poll");return}try{const{data:e,error:l}=await T.from("matches").select("*").eq("id",o.value.id).single();if(l){console.error("‚ùå Manual poll error:",l);return}if(e)if(console.log("üìä Manual poll data received:",e),e.score_a!==o.value.score_a||e.score_b!==o.value.score_b||(e.pc_a||0)!==(o.value.pc_a||0)||(e.pc_b||0)!==(o.value.pc_b||0)||e.status!==o.value.status||e.time_left!==o.value.time_left||JSON.stringify(e.boosters)!==JSON.stringify(o.value.boosters)){console.log("üìä Manual poll detected changes - updating!");const c={eventType:"UPDATE",new:e,old:o.value};ue(c)}else console.log("üìä Manual poll - no changes detected")}catch(e){console.error("‚ùå Manual poll failed:",e)}}function rt(){if(console.log("üîß setupRealtimeSubscription called",{hasCurrentMatch:!!o.value,matchId:o.value?.id,matchStatus:o.value?.status}),!o.value){console.log("‚ùå No current match - cannot set up subscription, starting polling anyway"),le();return}console.log("üîß Setting up ScoreboardView real-time subscription for match:",o.value.id),N&&(console.log("üîß Unsubscribing from previous subscription"),N.unsubscribe(),N=null);const e=`match_${o.value.id}`;console.log("üì° Creating channel:",e),N=T.channel(e).on("postgres_changes",{event:"*",schema:"public",table:"matches",filter:`id=eq.${o.value.id}`},l=>{console.log("üéØ ScoreboardView received real-time payload:",l),console.log("üéØ ScoreboardView FULL payload object:",JSON.stringify(l,null,2)),fe=!0,ue(l)}).subscribe(l=>{console.log("üì° ScoreboardView subscription status:",l),de.value=l,l==="SUBSCRIBED"?(console.log("‚úÖ ScoreboardView successfully subscribed to real-time updates"),console.log("üîÑ Starting polling as backup"),le(),console.log("‚úÖ Keeping polling active for reliability")):l==="CHANNEL_ERROR"&&(console.error("‚ùå ScoreboardView subscription error"),de.value="Error",le())})}function it(){W.value=!0,ie(),setTimeout(()=>{W.value=!1},1e3)}function Oe(e,l,t,c){console.log("üïê Starting booster countdown...",{teamKey:e,booster:l,teamName:t,boosterIndex:c}),qe(),B&&(clearInterval(B),B=null),p.value={active:!0,teamName:t,boosterName:l.name,boosterIcon:l.icon,teamColor:e==="teamA"?"blue":"red",countdown:15,teamKey:e,boosterIndex:c},B=setInterval(()=>{p.value&&p.value.countdown>1?(p.value.countdown--,console.log(`‚è∞ Booster countdown: ${p.value.countdown}`)):(console.log("üöÄ Countdown finished - triggering booster activation!"),ve(l),clearInterval(B),B=null,p.value&&(me(p.value.teamKey,l,p.value.teamName),p.value=null))},1e3)}function ct(e){console.log("üé™ Starting maddie countdown...",{maddie:e}),qe(),A&&(clearInterval(A),A=null),_.value={active:!0,maddieName:e.name||e.title||"Special Effect",maddieIcon:e.icon||"üé™",maddieDescription:e.description||e.subtitle||"A special effect will be activated",maddieDuration:e.duration||null,countdown:15},A=setInterval(()=>{_.value&&_.value.countdown>1?(_.value.countdown--,console.log(`‚è∞ Maddie countdown: ${_.value.countdown}`)):(console.log("üöÄ Maddie countdown finished - triggering maddie activation!"),ie(),clearInterval(A),A=null,_.value&&(Me(e),_.value=null))},1e3)}function me(e,l,t){if(console.log("üéØ Booster activated!",{teamKey:e,booster:l,teamName:t}),k.value={active:!0,teamName:t,boosterName:l.name,boosterIcon:l.icon,teamColor:e==="teamA"?"blue":"red"},ve(l),l.duration&&l.duration>0){const c=`${e}_${l.id}`;if(Object.keys(q.value).find(v=>v.startsWith(c))){console.log(`‚ö†Ô∏è Timer already exists for ${l.name}, skipping duplicate creation`);return}const d=`${c}_${Date.now()}`,g=Date.now()+l.duration*60*1e3;q.value[d]={booster:l,team:e,endTime:g,remainingTime:l.duration*60},console.log(`üïê Started timer for ${l.name}: ${l.duration} minutes`);const f=setInterval(async()=>{const v=q.value[d];if(!v){clearInterval(f),delete Y.value[d];return}const $=Date.now();v.remainingTime=Math.max(0,Math.floor((v.endTime-$)/1e3)),v.remainingTime<=0&&(console.log(`‚è∞ Timer expired for ${v.booster.name}`),ft(),await gt(v.team,v.booster.id),delete q.value[d],clearInterval(f),delete Y.value[d])},1e3);Y.value[d]=f}else console.log(`‚ö° Instant booster activated: ${l.name}`),l.id==="coach_stroke"&&console.log("üéØ Coach stroke activated - game should pause for execution");setTimeout(()=>{k.value&&(k.value.active=!1,setTimeout(()=>{k.value=null},500))},3e3)}function Me(e){console.log("üé™ Maddie activated!",{maddie:e}),X.value={active:!0,maddieName:e.name||e.title||"Special Effect",maddieIcon:e.icon||"üé™",maddieDescription:e.description||e.subtitle||"A special effect has been activated",maddieDuration:e.duration||null},W.value=!0,ie(),setTimeout(()=>{W.value=!1},1e3),setTimeout(()=>{X.value&&(X.value.active=!1,setTimeout(()=>{X.value=null},500))},4e3),e.duration&&e.duration>0&&dt(e)}function dt(e){console.log("üïê Starting maddie timer...",{maddie:e,duration:e.duration}),L&&(clearInterval(L),L=null);const l=Date.now()+e.duration*1e3;D.value={maddie:e,endTime:l,remainingTime:e.duration},console.log(`üïê Started maddie timer: ${e.duration} seconds`),L=setInterval(()=>{if(D.value){const t=Date.now(),c=Math.max(0,Math.ceil((D.value.endTime-t)/1e3));D.value.remainingTime=c,console.log(`‚è∞ Maddie timer: ${c}s remaining`),c<=0&&(console.log("üö´ Maddie timer expired"),bt(),ge())}else ge()},1e3)}function ge(){console.log("üßπ Clearing maddie timer"),L&&(clearInterval(L),L=null),D.value=null}function ut(e,l){console.log("üîç detectMaddieActivation called:",{oldMaddie:e,newMaddie:l});const t=typeof e=="boolean"?e:e?.activated,c=typeof e=="object"?e?.countdown:!1,i=typeof l=="boolean"?l:l?.activated,d=typeof l=="object"?l?.countdown:!1;console.log("üîç Maddie state comparison:",{oldActivated:t,newActivated:i,oldCountdown:c,newCountdown:d,willTriggerCountdown:!c&&d,willTriggerActivation:!t&&i,isLegacyActivation:typeof l=="boolean"&&!e&&l}),!c&&d&&typeof l=="object"?(console.log("üïê STARTING Maddie countdown!"),ct(l)):!t&&i&&!d&&typeof l=="object"?(console.log("üöÄ TRIGGERING Maddie activation!"),Me(l)):typeof l=="boolean"&&!e&&l&&(console.log("üé™ TRIGGERING Legacy Maddie activation!"),it()),t&&!i&&(console.log("üö´ Maddie deactivated - clearing timer"),ge())}function xt(e,l){if(console.log("üîç SCOREBOARD - detectBoosterActivation called:",{oldBoosters:e,newBoosters:l}),console.log("üîç SCOREBOARD - detectBoosterActivation TRIGGERED"),!e||!l){console.log("‚ùå Missing booster data for activation detection");return}e.teamA&&l.teamA&&(console.log(`üîç Checking Team A boosters: ${e.teamA.length} old vs ${l.teamA.length} new`),l.teamA.forEach((t,c)=>{const i=e.teamA[c];console.log(`üîç Team A booster ${c}:`,{oldActivated:i?.activated,newActivated:t.activated,oldCountdown:i?.countdown,newCountdown:t.countdown,willTriggerCountdown:i&&!i.countdown&&t.countdown,willTriggerActivation:i&&!i.activated&&t.activated,boosterName:t.name||t.id}),i&&!i.countdown&&t.countdown?(console.log("üïê STARTING Team A booster countdown!"),Oe("teamA",t,M.value?.name||"Team A",c)):i&&!i.activated&&t.activated&&!t.countdown&&(console.log("üöÄ TRIGGERING Team A booster activation!"),me("teamA",t,M.value?.name||"Team A"))})),e.teamB&&l.teamB&&(console.log(`üîç Checking Team B boosters: ${e.teamB.length} old vs ${l.teamB.length} new`),l.teamB.forEach((t,c)=>{const i=e.teamB[c];console.log(`üîç Team B booster ${c}:`,{oldActivated:i?.activated,newActivated:t.activated,oldCountdown:i?.countdown,newCountdown:t.countdown,willTriggerCountdown:i&&!i.countdown&&t.countdown,willTriggerActivation:i&&!i.activated&&t.activated,boosterName:t.name||t.id}),i&&!i.countdown&&t.countdown?(console.log("üïê STARTING Team B booster countdown!"),Oe("teamB",t,j.value?.name||"Team B",c)):i&&!i.activated&&t.activated&&!t.countdown&&(console.log("üöÄ TRIGGERING Team B booster activation!"),me("teamB",t,j.value?.name||"Team B"))}))}function je(){console.log("üßπ Clearing all active booster timers"),Object.values(Y.value).forEach(e=>{clearInterval(e)}),Y.value={},q.value={}}const Pe=e=>{if(e<=0)return"0:00";const l=Math.floor(e/60),t=e%60;return`${l}:${t.toString().padStart(2,"0")}`},mt=e=>{if(e<=0)return"0:00";const l=Math.floor(e/60),t=e%60;return`${l}:${t.toString().padStart(2,"0")}`},re=(e,l)=>{for(const[t,c]of Object.entries(q.value))if(c.team===e&&c.booster.id===l)return c;return null};async function gt(e,l){if(o.value)try{console.log(`üö´ Marking booster ${l} as expired for ${e}`);const t={...o.value.boosters};t[e]&&(t[e]=t[e].map(i=>i.id===l?{...i,expired:!0}:i));const{error:c}=await T.from("matches").update({boosters:t}).eq("id",o.value.id);c?console.error("Error marking booster as expired:",c):console.log(`‚úÖ Booster ${l} marked as expired in database`)}catch(t){console.error("Error marking booster as expired:",t)}}J(()=>o.value,async(e,l)=>{e?.id!==l?.id&&(console.log("üì° Match changed in scoreboard:",{old_match_id:l?.id,new_match_id:e?.id,team_a_id:e?.team_a,team_b_id:e?.team_b,team_a_found:!!(e?.team_a&&S.value[e.team_a]),team_b_found:!!(e?.team_b&&S.value[e.team_b]),team_a_name:e?.team_a?S.value[e.team_a]?.name:void 0,team_b_name:e?.team_b?S.value[e.team_b]?.name:void 0,available_teams:Object.keys(S.value),teams_count:Object.keys(S.value).length}),je(),A&&(clearInterval(A),A=null),_.value=null,(e?.team_a&&!S.value[e.team_a]||e?.team_b&&!S.value[e.team_b])&&(console.log("üì° Teams missing for match, reloading teams..."),await De()),e&&z())},{deep:!0}),J(()=>o.value?.time_left,()=>{o.value&&ne()}),J(()=>o.value?.boosters?.selection_phase,(e,l)=>{e==="complete"&&l!=="complete"&&(console.log("üéØ Scoreboard detected booster selection complete - waiting for admin confirmation"),console.log("‚úÖ Overlay will remain visible until explicit confirmation in MatchControl"))});async function ie(){try{await y.playSound("/sounds/maddies/default.mp3")}catch{console.log("Playing default maddie sound");try{await y.playSound("/sounds/maddie.mp3")}catch{console.warn("No maddie sound available")}}}async function ve(e){try{if(e?.sound_file)if(e.sound_file.startsWith("custom_")){const l=y.getCustomSound(e.sound_file);if(l){await y.playSound(l);return}}else{await y.playSound(`/sounds/boosters/${e.sound_file}`);return}await y.playSound("/sounds/booster-activate.mp3")}catch{console.log("Playing fallback booster sound");try{await y.playSound("/sounds/whistle.mp3")}catch{console.warn("No booster sound available")}}}async function vt(){try{await y.playSound("/sounds/booster_spin.wav",.6),console.log("üîä Playing spinning sound on scoreboard")}catch{console.log("üîä Spinning sound not available, trying fallback");try{await y.playSound("/sounds/boosters/booster_1.mp3",.4)}catch{console.warn("üîä No spinning sound available")}}}async function pt(){try{await y.playSound("/sounds/selection.mp3",1.5),console.log("üîä Playing booster selection sound on scoreboard")}catch{console.log("üîä Selection sound not available, trying fallback");try{await y.playSound("/sounds/boosters/booster_2.mp3",.5)}catch{console.warn("üîä No selection sound available")}}}async function qe(){try{await y.playSound("/sounds/countdown.wav",1),console.log("üîä Playing countdown start sound")}catch{console.log("üîä Countdown sound not available, trying fallback");try{await y.playSound("/sounds/tick.mp3",.5)}catch{console.warn("üîä No countdown sound available")}}}async function bt(){try{console.log("üîä Playing maddie end sound"),await y.playSound("/sounds/end-maddie.wav")}catch{console.warn("End maddie sound not available, using default"),ie()}}async function ft(){try{console.log("üîä Playing booster end sound"),await y.playSound("/sounds/end-booster.wav")}catch{console.warn("End booster sound not available, using default"),ve()}}let pe=!1,Le=-1;return J(()=>o.value?.boosters?.is_spinning,e=>{e&&!pe?vt():!e&&pe&&pt(),pe=!!e},{immediate:!0}),J(()=>o.value?.boosters?.spinning_slot,e=>{o.value?.boosters?.is_spinning,Le=e||-1},{immediate:!0}),J(()=>o.value?.id,(e,l)=>{e&&e!==l&&(console.log("üîß Match changed, setting up new subscription for:",e),console.log("üîß Match details:",{id:e,teamA:o.value?.team_a,teamB:o.value?.team_b,status:o.value?.status}),N&&N.unsubscribe(),rt())},{immediate:!0}),kt(async()=>{ce.value=!0,console.log("üèí Scoreboard mounting on:",{url:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,base_url:"/sportsmadness/",is_production:!0,props_id:H.id});try{await Promise.all([tt(),De(),ze()]),console.log("‚úÖ Scoreboard data loaded successfully")}catch(e){console.error("‚ùå CRITICAL: Failed to initialize Scoreboard:",e),console.log("‚ö†Ô∏è Scoreboard will attempt to continue with limited functionality"),e instanceof Error&&console.log("Error details:",{name:e.name,message:e.message,stack:e.stack?.split(`
`)[0]})}finally{ce.value=!1,console.log("‚úÖ Scoreboard initialization complete (loading state cleared)")}}),Tt(()=>{N&&N.unsubscribe(),ae(),_e(),B&&(clearInterval(B),B=null),A&&(clearInterval(A),A=null),je()}),(e,l)=>(r(),n("div",{class:u(["min-h-screen transition-colors duration-500",{"animate-flash":W.value}]),style:be({backgroundColor:h(w).currentTheme?.colors.background,color:h(w).currentTheme?.colors.text})},[ce.value?(r(),n("div",Ct,[s("div",$t,a(e.$t("scoreboard.loading")),1)])):o.value?x("",!0):(r(),n("div",It,[s("div",null,[s("div",Nt,[h(w).currentTheme?.logo?(r(),n("div",Rt,[s("img",{src:h(w).currentTheme.logo,alt:h(w).currentTheme.name,class:"w-24 h-24 animate-pulse"},null,8,Dt)])):(r(),n("div",Ot,"ÔøΩ"))]),s("h2",Mt,a(e.$t("scoreboard.noActiveMatch")),1),s("p",jt,a(e.$t("scoreboard.checkBackMessage")),1)])])),Ke.value?(r(),n("div",Pt,[s("div",qt,[s("h1",{class:u([o.value?.boosters?.is_spinning?"text-5xl lg:text-6xl xl:text-7xl mb-4 lg:mb-6":"text-8xl lg:text-9xl xl:text-[8rem] mb-8 lg:mb-12","font-bold text-white drop-shadow-2xl"])}," üé∞ "+a(e.$t("scoreboard.boosterSelection"))+" üé∞ ",3),s("div",{class:u([o.value?.boosters?.is_spinning?"text-2xl lg:text-3xl xl:text-4xl mb-4 lg:mb-6":"text-4xl lg:text-5xl xl:text-6xl mb-8 lg:mb-12","font-bold text-white drop-shadow-xl"])},a(Ze()),3),o.value?.boosters?.is_spinning?(r(),n("div",Lt,[s("div",Gt,a(e.$t("scoreboard.spinningFor",{team:o.value.boosters.current_team==="A"?M.value?.name:j.value?.name})),1),s("div",Ut,[s("div",zt,[s("div",Ft,[s("div",Vt,a(C.value[o.value.boosters.spinning_slot||0]?.icon||"üé≤"),1),s("div",Jt,a(C.value[o.value.boosters.spinning_slot||0]?.name||"Spinning..."),1),s("div",Ht,a(C.value[o.value.boosters.spinning_slot||0]?.description||"Rolling the dice..."),1)])]),s("div",Wt,a(e.$t("scoreboard.hockeyCasino")),1),s("div",Qt,a(e.$t("scoreboard.boosterSelectionLabel")),1)])])):x("",!0),s("div",{class:u([o.value?.boosters?.is_spinning?"gap-4 lg:gap-6":"gap-8 lg:gap-12","grid grid-cols-1 xl:grid-cols-2 max-w-7xl mx-auto w-full"])},[s("div",{class:u([o.value?.boosters?.is_spinning?"p-4 lg:p-6":"p-8 lg:p-12","bg-white/10 rounded-3xl border-4 border-blue-500/50 backdrop-blur-sm shadow-2xl"])},[s("h3",{class:u([o.value?.boosters?.is_spinning?"text-2xl lg:text-3xl xl:text-4xl mb-3 lg:mb-4":"text-4xl lg:text-5xl xl:text-6xl mb-6 lg:mb-8","font-bold text-blue-300 drop-shadow-lg"])},a(M.value?.name||"Team A"),3),o.value?.boosters?.current_boosters?.teamA&&o.value.boosters.current_boosters.teamA.length>0?(r(),n("div",{key:0,class:u([o.value?.boosters?.is_spinning?"space-y-2 lg:space-y-3":"space-y-4 lg:space-y-6",""])},[(r(!0),n(E,null,I(o.value.boosters.current_boosters.teamA,(t,c)=>(r(),n("div",{key:c,class:u([o.value?.boosters?.is_spinning?"p-3 lg:p-4":"p-6 lg:p-8","bg-blue-500/20 rounded-2xl border-2 border-blue-400/30 shadow-lg"])},[s("div",{class:u([o.value?.boosters?.is_spinning?"text-lg lg:text-xl xl:text-2xl mb-1":"text-2xl lg:text-3xl xl:text-4xl mb-2","font-bold text-white drop-shadow-sm"])},a(t.icon)+" "+a(t.name),3),s("div",{class:u([o.value?.boosters?.is_spinning?"text-sm lg:text-base xl:text-lg":"text-lg lg:text-xl xl:text-2xl","text-blue-200 drop-shadow-sm"])},a(t.description?.length>150?t.description.substring(0,150)+"...":t.description),3)],2))),128))],2)):(r(),n("div",{key:1,class:u([o.value?.boosters?.is_spinning?"text-lg lg:text-xl xl:text-2xl":"text-2xl lg:text-3xl xl:text-4xl","text-blue-300 italic drop-shadow-sm"])},a(e.$t("scoreboard.waitingForBoosters")),3))],2),s("div",{class:u([o.value?.boosters?.is_spinning?"p-4 lg:p-6":"p-8 lg:p-12","bg-white/10 rounded-3xl border-4 border-red-500/50 backdrop-blur-sm shadow-2xl"])},[s("h3",{class:u([o.value?.boosters?.is_spinning?"text-2xl lg:text-3xl xl:text-4xl mb-3 lg:mb-4":"text-4xl lg:text-5xl xl:text-6xl mb-6 lg:mb-8","font-bold text-red-300 drop-shadow-lg"])},a(j.value?.name||"Team B"),3),o.value?.boosters?.current_boosters?.teamB&&o.value.boosters.current_boosters.teamB.length>0?(r(),n("div",{key:0,class:u([o.value?.boosters?.is_spinning?"space-y-2 lg:space-y-3":"space-y-4 lg:space-y-6",""])},[(r(!0),n(E,null,I(o.value.boosters.current_boosters.teamB,(t,c)=>(r(),n("div",{key:c,class:u([o.value?.boosters?.is_spinning?"p-3 lg:p-4":"p-6 lg:p-8","bg-red-500/20 rounded-2xl border-2 border-red-400/30 shadow-lg"])},[s("div",{class:u([o.value?.boosters?.is_spinning?"text-lg lg:text-xl xl:text-2xl mb-1":"text-2xl lg:text-3xl xl:text-4xl mb-2","font-bold text-white drop-shadow-sm"])},a(t.icon)+" "+a(t.name),3),s("div",{class:u([o.value?.boosters?.is_spinning?"text-sm lg:text-base xl:text-lg":"text-lg lg:text-xl xl:text-2xl","text-red-200 drop-shadow-sm"])},a(t.description?.length>150?t.description.substring(0,150)+"...":t.description),3)],2))),128))],2)):(r(),n("div",{key:1,class:u([o.value?.boosters?.is_spinning?"text-lg lg:text-xl xl:text-2xl":"text-2xl lg:text-3xl xl:text-4xl","text-red-300 italic drop-shadow-sm"])},a(e.$t("scoreboard.waitingForBoosters")),3))],2)],2),o.value?.boosters?.selection_phase==="complete"?(r(),n("div",{key:1,class:u(o.value?.boosters?.is_spinning?"mt-4 lg:mt-6":"mt-8 lg:mt-12")},[s("div",{class:u([o.value?.boosters?.is_spinning?"text-xl lg:text-2xl xl:text-3xl":"text-3xl lg:text-4xl xl:text-5xl","text-green-400 font-bold drop-shadow-lg"])},a(e.$t("scoreboard.boostersConfirmed")),3),s("div",{class:u([o.value?.boosters?.is_spinning?"text-lg lg:text-xl xl:text-2xl mt-2":"text-xl lg:text-2xl xl:text-3xl mt-4","text-white/70 drop-shadow-sm"])},a(e.$t("scoreboard.returningToScoreboard")),3)],2)):x("",!0)])])):(r(),n("div",Xt,[s("div",Yt,[s("div",Zt,[h(w).currentTheme?.logo?(r(),n("div",Kt,[s("img",{src:h(w).currentTheme.logo,alt:h(w).currentTheme.name,class:"w-12 h-12"},null,8,el)])):(r(),n("div",tl,"ÔøΩ")),s("h1",ll,a(h(w).currentTheme?.name||e.$t("home.title")),1)]),s("div",ol,[l[1]||(l[1]=s("div",{class:"w-3 h-3 bg-red-500 rounded-full animate-pulse"},null,-1)),s("span",{class:"text-base font-medium font-theme-text",style:be({color:h(w).currentTheme?.colors.textSecondary})},a(e.$t("scoreboard.liveUpdate")||"LIVE"),5)])]),o.value?.boosters&&(o.value.boosters.teamA?.some(t=>t.activated&&!t.expired)||o.value.boosters.teamB?.some(t=>t.activated&&!t.expired))?(r(),n("div",sl,[l[9]||(l[9]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-green-900/80 to-emerald-600/80 backdrop-blur-md"},null,-1)),s("div",al,[l[8]||(l[8]=s("div",{class:"text-8xl lg:text-9xl xl:text-[8rem] font-bold text-white mb-12 drop-shadow-2xl animate-pulse",style:{"text-shadow":"6px 6px 12px rgba(0,0,0,0.9)"}}," ‚ö° ACTIVE BOOSTERS ‚ö° ",-1)),s("div",nl,[o.value.boosters.teamA?.some(t=>t.activated&&!t.expired)?(r(),n("div",rl,[s("div",il,a(M.value?.name||"Team A"),1),s("div",cl,[(r(!0),n(E,null,I(o.value.boosters.teamA,t=>(r(),n(E,{key:`overlay-a-${t.id}`},[t.activated&&!t.expired?(r(),n("div",dl,[l[2]||(l[2]=s("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-emerald-500/30 animate-pulse rounded-3xl"},null,-1)),l[3]||(l[3]=s("div",{class:"absolute inset-0 bg-black/20 rounded-3xl"},null,-1)),s("div",ul,[s("div",xl,[s("span",ml,a(t.icon),1),s("div",gl,[s("div",vl,a(t.name),1),s("div",pl,a(t.description?.length>150?t.description.substring(0,150)+"...":t.description||"Active boost effect"),1)])]),s("div",bl,[t.duration&&re("teamA",t.id)?(r(),n("div",fl," ‚è∞ "+a(Pe(re("teamA",t.id)?.remainingTime||0)),1)):t.duration?x("",!0):(r(),n("div",hl," ‚ö° INSTANT "))])]),l[4]||(l[4]=s("div",{class:"absolute top-4 right-4 text-yellow-300 text-4xl lg:text-5xl animate-spin drop-shadow-xl"},"‚ú®",-1))])):x("",!0)],64))),128))])])):x("",!0),o.value.boosters.teamB?.some(t=>t.activated&&!t.expired)?(r(),n("div",_l,[s("div",yl,a(j.value?.name||"Team B"),1),s("div",wl,[(r(!0),n(E,null,I(o.value.boosters.teamB,t=>(r(),n(E,{key:`overlay-b-${t.id}`},[t.activated&&!t.expired?(r(),n("div",Sl,[l[5]||(l[5]=s("div",{class:"absolute inset-0 bg-gradient-to-r from-green-500/30 to-emerald-500/30 animate-pulse rounded-3xl"},null,-1)),l[6]||(l[6]=s("div",{class:"absolute inset-0 bg-black/20 rounded-3xl"},null,-1)),s("div",kl,[s("div",Tl,[s("span",Al,a(t.icon),1),s("div",El,[s("div",Bl,a(t.name),1),s("div",Cl,a(t.description?.length>150?t.description.substring(0,150)+"...":t.description||"Active boost effect"),1)])]),s("div",$l,[t.duration&&re("teamB",t.id)?(r(),n("div",Il," ‚è∞ "+a(Pe(re("teamB",t.id)?.remainingTime||0)),1)):t.duration?x("",!0):(r(),n("div",Nl," ‚ö° INSTANT "))])]),l[7]||(l[7]=s("div",{class:"absolute top-4 right-4 text-yellow-300 text-4xl lg:text-5xl animate-spin drop-shadow-xl"},"‚ú®",-1))])):x("",!0)],64))),128))])])):x("",!0)])])])):x("",!0),o.value?.maddie&&(typeof o.value.maddie=="object"&&o.value.maddie.activated||typeof o.value.maddie=="boolean"&&o.value.maddie)?(r(),n("div",Rl,[l[14]||(l[14]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-purple-900/90 to-purple-600/90 backdrop-blur-xl"},null,-1)),s("div",Dl,[l[13]||(l[13]=s("div",{class:"flex-shrink-0"},null,-1)),s("div",Ol,[s("div",Ml,a(o.value&&typeof o.value.maddie=="object"&&o.value.maddie.icon||"üì¢"),1),l[10]||(l[10]=s("div",{class:"text-4xl lg:text-6xl xl:text-7xl font-bold text-white drop-shadow-2xl animate-pulse flex-shrink-0",style:{"text-shadow":"6px 6px 12px rgba(0,0,0,0.9)"}}," MADDIE EFFECT ACTIVE ",-1)),s("div",jl,a(o.value&&typeof o.value.maddie=="object"&&(o.value.maddie.name||o.value.maddie.title)||"Special Effect"),1),o.value&&typeof o.value.maddie=="object"&&(o.value.maddie.description||o.value.maddie.subtitle)?(r(),n("div",Pl,a(o.value.maddie.description||o.value.maddie.subtitle),1)):x("",!0)]),s("div",ql,[D.value?(r(),n("div",Ll,[s("div",Gl,[l[11]||(l[11]=s("span",{class:"text-yellow-300 animate-pulse text-3xl lg:text-4xl xl:text-5xl drop-shadow-2xl"},"‚è∞",-1)),s("span",Ul,a(mt(D.value.remainingTime)),1),l[12]||(l[12]=s("span",{class:"text-lg lg:text-xl xl:text-2xl text-purple-200 drop-shadow-lg"},"remaining",-1))])])):o.value&&typeof o.value.maddie=="object"&&o.value.maddie.duration?(r(),n("div",zl," ‚è±Ô∏è Duration: "+a(o.value.maddie.duration)+"s ",1)):x("",!0)])])])):x("",!0),s("div",Fl,[s("div",Vl,[s("div",Jl,[s("div",Hl,[!Fe.value&&(o.value?.boosters?.current_boosters?.teamA?.length>0||o.value?.boosters?.teamA?.length>0)?(r(),n("div",Wl,[s("div",Ql,[(r(!0),n(E,null,I(Je.value,t=>(r(),n("div",{key:t.id||t.name,class:u(["relative transition-all duration-300 min-w-24 lg:min-w-32",{"opacity-60 scale-95":t.isExpired,"bg-blue-600/50 rounded-2xl p-4 lg:p-6 border-3 border-blue-300/70 shadow-xl backdrop-blur-sm":!t.isExpired,"bg-blue-600/30 rounded-2xl p-4 lg:p-6 border-3 border-blue-300/40 shadow-lg backdrop-blur-sm":t.isExpired}])},[s("div",Xl,[s("div",{class:u(["text-4xl lg:text-5xl xl:text-6xl mb-3 drop-shadow-lg",{"opacity-50":t.isExpired}])},a(t.icon),3),s("div",{class:u(["text-base lg:text-lg xl:text-xl font-bold text-white drop-shadow-md",{"opacity-50":t.isExpired}])},a(t.name),3)]),t.isExpired?(r(),n("div",Yl,[...l[15]||(l[15]=[s("div",{class:"text-red-500 text-6xl lg:text-7xl xl:text-8xl font-bold opacity-90 transform rotate-12"},"‚úó",-1)])])):x("",!0)],2))),128))])])):x("",!0),s("h2",Zl,a(M.value?.name||"Team A"),1),s("div",Kl,a(o.value?.score_a||0),1),s("div",eo," PC: "+a(o.value?.pc_a||0),1),se("team_a").length>0?(r(),n("div",to,[l[16]||(l[16]=s("div",{class:"text-lg lg:text-2xl xl:text-3xl font-semibold text-red-300 mb-2"},"PENALTIES",-1)),(r(!0),n(E,null,I(se("team_a"),t=>(r(),n("div",{key:t.playerId,class:u(["text-sm lg:text-lg xl:text-xl px-3 py-2 rounded-lg font-bold",{"bg-yellow-500 text-black":t.type==="yellow","bg-green-600 text-white":t.type==="green","bg-red-600 text-white":t.type==="red"}])}," #"+a(t.playerNumber)+" "+a(t.playerName),3))),128))])):x("",!0)])]),s("div",lo,[s("div",oo,[s("div",so,a(Qe.value),1),s("div",ao,a(Be(V.value)),1)]),s("div",{class:u(["px-8 py-6 rounded-3xl text-white font-bold text-2xl lg:text-4xl xl:text-6xl",o.value?$e(o.value.status):"bg-gray-500"])},a(o.value?Ie(o.value.status):"LOADING"),3)]),s("div",no,[s("div",ro,[!Ve.value&&(o.value?.boosters?.current_boosters?.teamB?.length>0||o.value?.boosters?.teamB?.length>0)?(r(),n("div",io,[s("div",co,[(r(!0),n(E,null,I(He.value,t=>(r(),n("div",{key:t.id||t.name,class:u(["relative transition-all duration-300 min-w-24 lg:min-w-32",{"opacity-60 scale-95":t.isExpired,"bg-red-600/50 rounded-2xl p-4 lg:p-6 border-3 border-red-300/70 shadow-xl backdrop-blur-sm":!t.isExpired,"bg-red-600/30 rounded-2xl p-4 lg:p-6 border-3 border-red-300/40 shadow-lg backdrop-blur-sm":t.isExpired}])},[s("div",uo,[s("div",{class:u(["text-4xl lg:text-5xl xl:text-6xl mb-3 drop-shadow-lg",{"opacity-50":t.isExpired}])},a(t.icon),3),s("div",{class:u(["text-base lg:text-lg xl:text-xl font-bold text-white drop-shadow-md",{"opacity-50":t.isExpired}])},a(t.name),3)]),t.isExpired?(r(),n("div",xo,[...l[17]||(l[17]=[s("div",{class:"text-red-500 text-6xl lg:text-7xl xl:text-8xl font-bold opacity-90 transform rotate-12"},"‚úó",-1)])])):x("",!0)],2))),128))])])):x("",!0),s("h2",mo,a(j.value?.name||"Team B"),1),s("div",go,a(o.value?.score_b||0),1),s("div",vo," PC: "+a(o.value?.pc_b||0),1),se("team_b").length>0?(r(),n("div",po,[l[18]||(l[18]=s("div",{class:"text-lg lg:text-2xl xl:text-3xl font-semibold text-red-300 mb-2"},"PENALTIES",-1)),(r(!0),n(E,null,I(se("team_b"),t=>(r(),n("div",{key:t.playerId,class:u(["text-sm lg:text-lg xl:text-xl px-3 py-2 rounded-lg font-bold",{"bg-yellow-500 text-black":t.type==="yellow","bg-green-600 text-white":t.type==="green","bg-red-600 text-white":t.type==="red"}])}," #"+a(t.playerNumber)+" "+a(t.playerName),3))),128))])):x("",!0)])])])]),s("div",bo,[s("div",fo,[h(w).currentTheme?.logo?(r(),n("img",{key:0,src:h(w).currentTheme.logo,alt:h(w).currentTheme.name,class:"w-4 h-4"},null,8,ho)):(r(),n("span",_o,"üèí")),s("p",{class:"text-sm font-theme-text cursor-pointer hover:opacity-80 transition-opacity",style:be({color:h(w).currentTheme?.colors.textSecondary}),onClick:et,title:Ne.value?"Toggle debug panel":""}," Live Tournament Coverage ",12,yo)])])])),p.value?.active?(r(),n("div",wo,[l[21]||(l[21]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-black/90 to-gray-900/90 backdrop-blur-xl"},null,-1)),s("div",So,[s("div",ko,a(p.value.boosterIcon),1),s("div",{class:u(["text-5xl lg:text-6xl xl:text-7xl font-bold mb-4 lg:mb-6 drop-shadow-2xl",{"text-blue-300":p.value.teamColor==="blue","text-red-300":p.value.teamColor==="red"}]),style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},a(p.value.teamName),3),l[19]||(l[19]=s("div",{class:"text-4xl lg:text-6xl xl:text-7xl font-bold text-white mb-4 lg:mb-6 drop-shadow-2xl animate-pulse",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}}," BOOSTER INCOMING! ",-1)),s("div",{class:u(["text-3xl lg:text-4xl xl:text-5xl font-bold px-8 py-4 lg:px-12 lg:py-6 rounded-3xl border-4 mb-4 lg:mb-6 backdrop-blur-lg shadow-2xl max-w-3xl mx-auto",{"bg-blue-600/90 border-blue-200 text-blue-50":p.value.teamColor==="blue","bg-red-600/90 border-red-200 text-red-50":p.value.teamColor==="red"}]),style:{"box-shadow":"0 8px 32px rgba(0,0,0,0.7)"}},a(p.value.boosterName),3),s("div",To,a(p.value.countdown),1),l[20]||(l[20]=s("div",{class:"text-2xl lg:text-3xl xl:text-4xl text-white drop-shadow-lg",style:{"text-shadow":"3px 3px 6px rgba(0,0,0,0.9)"}}," seconds until activation ",-1))])])):x("",!0),_.value?.active?(r(),n("div",Ao,[l[24]||(l[24]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-purple-900/90 to-purple-600/90 backdrop-blur-xl"},null,-1)),s("div",Eo,[s("div",Bo,a(_.value.maddieIcon),1),l[22]||(l[22]=s("div",{class:"text-4xl lg:text-6xl xl:text-7xl font-bold text-white mb-4 lg:mb-6 drop-shadow-2xl animate-pulse",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}}," MADDIE INCOMING! ",-1)),s("div",Co,a(_.value.maddieName),1),_.value.maddieDescription?(r(),n("div",$o,a(_.value.maddieDescription),1)):x("",!0),s("div",Io,a(_.value.countdown),1),l[23]||(l[23]=s("div",{class:"text-2xl lg:text-3xl xl:text-4xl text-white drop-shadow-lg",style:{"text-shadow":"3px 3px 6px rgba(0,0,0,0.9)"}}," seconds until activation ",-1))])])):x("",!0),k.value?.active?(r(),n("div",No,[l[26]||(l[26]=s("div",{class:"absolute inset-0 bg-gradient-to-br from-black/80 to-gray-900/80 backdrop-blur-lg"},null,-1)),s("div",Ro,[s("div",Do,a(k.value.boosterIcon),1),s("div",{class:u(["text-6xl font-bold mb-6 drop-shadow-2xl",{"text-blue-300":k.value.teamColor==="blue","text-red-300":k.value.teamColor==="red"}]),style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}},a(k.value.teamName),3),l[25]||(l[25]=s("div",{class:"text-5xl font-bold text-white mb-6 drop-shadow-2xl",style:{"text-shadow":"4px 4px 8px rgba(0,0,0,0.9)"}}," BOOSTER ACTIVATED! ",-1)),s("div",{class:u(["text-4xl font-bold px-12 py-6 rounded-3xl border-4 animate-pulse shadow-2xl",{"bg-blue-700/90 border-blue-300 text-white":k.value.teamColor==="blue","bg-red-700/90 border-red-300 text-white":k.value.teamColor==="red"}]),style:{"text-shadow":"3px 3px 6px rgba(0,0,0,0.8)","backdrop-filter":"blur(8px)"}},a(k.value.boosterName),3)])])):x("",!0),P.value?(r(),n("div",Oo,[s("div",Mo,[s("div",jo,[s("h2",Po,a(e.$t("scoreboard.selectMatch")),1),s("p",qo,a(e.$t("scoreboard.multipleMatchesFound")),1)]),s("div",Lo,[(r(!0),n(E,null,I(Q.value,t=>(r(),n("div",{key:t.id,onClick:c=>Re(t),class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 cursor-pointer hover:bg-white/20 transition-all duration-300"},[s("div",Uo,[s("div",zo,[s("h3",Fo,a(ot(t)),1),s("div",Vo,[s("span",null,a(e.$t("scoreboard.score"))+": "+a(t.score_a)+" - "+a(t.score_b),1),s("span",null,a(e.$t("scoreboard.time"))+": "+a(Be(t.time_left)),1)])]),s("div",Jo,[s("span",{class:u(["px-4 py-2 rounded-full text-white font-bold text-sm",$e(t.status)])},a(Ie(t.status)),3)])])],8,Go))),128))]),s("div",Ho,[s("button",{onClick:l[0]||(l[0]=t=>P.value=!1),class:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors"},a(e.$t("common.cancel")),1)])])])):x("",!0),Ne.value&&te.value?(r(),n("div",Wo,[l[27]||(l[27]=s("div",{class:"font-bold text-yellow-400"},"DEBUG PANEL",-1)),s("div",null,"Real-time: "+a(h(fe)?"‚úÖ Working":"‚ùå Failed"),1),s("div",null,"Polling: "+a(h(R)?"üîÑ Active":"‚è∏Ô∏è Inactive"),1),s("div",null,"Subscription: "+a(de.value),1),s("div",null,"Last Update: "+a(he.value),1),s("div",null,"Match ID: "+a(o.value?.id?.slice(-8)||"None"),1),s("div",{class:"space-x-2 pt-2"},[s("button",{onClick:st,class:"bg-blue-600 px-2 py-1 rounded text-xs"},"Test RT"),s("button",{onClick:at,class:"bg-green-600 px-2 py-1 rounded text-xs"},"Test DB"),s("button",{onClick:le,class:"bg-orange-600 px-2 py-1 rounded text-xs"},"Start Poll"),s("button",{onClick:_e,class:"bg-red-600 px-2 py-1 rounded text-xs"},"Stop Poll"),s("button",{onClick:nt,class:"bg-purple-600 px-2 py-1 rounded text-xs"},"Poll Once")])])):x("",!0)],6))}}),Ko=Bt(Qo,[["__scopeId","data-v-9434d99e"]]);export{Ko as default};
