class l{static audioCache=new Map;static getBasePath(){return"/sportsmadness/"}static async getAvailableSounds(t){const a=[],s=this.getBasePath();return(t==="boosters"?["booster_1.mp3","booster_2.mp3","booster_3.mp3","booster_4.mp3"]:["maddie_1.mp3","maddie_2.mp3","maddie_3.mp3","maddie_4.mp3"]).forEach(i=>{a.push({name:i,path:`${s}sounds/${t}/${i}`,displayName:i.replace(".mp3","").replace("_"," ").toUpperCase()})}),a}static async playSound(t,a=.7){try{const s=Math.max(0,Math.min(1,a));s!==a&&console.warn(`ðŸ”Š Volume ${a} out of range, clamped to ${s}`);let e=t;const i=this.getBasePath();if(!t.startsWith("http")&&!t.startsWith("data:")&&!t.startsWith(i)){const r=t.startsWith("/")?t.substring(1):t;e=`${i}${r}`}let o=this.audioCache.get(e);o||(o=new Audio(e),o.volume=s,this.audioCache.set(e,o)),o.currentTime=0,o.volume=s,console.log("ðŸ”Š Playing sound:",e),await o.play()}catch(s){console.error("ðŸ”Š Error playing sound:",t,s)}}static preloadSound(t){let a=t;const s=this.getBasePath();if(!t.startsWith("http")&&!t.startsWith("data:")&&!t.startsWith(s)){const e=t.startsWith("/")?t.substring(1):t;a=`${s}${e}`}if(!this.audioCache.has(a)){const e=new Audio(a);e.preload="auto",this.audioCache.set(a,e)}}static async uploadCustomSound(t,a,s){return new Promise((e,i)=>{const o=new FileReader;o.onload=r=>{const n=r.target?.result,c=`custom_${a}_${s}_${t.name}`;localStorage.setItem(`sound_${c}`,n),console.log("ðŸ“ Custom sound uploaded:",c),e(`data:audio/mp3;base64,${n.split(",")[1]}`)},o.onerror=()=>i(new Error("Failed to read file")),o.readAsDataURL(t)})}static getCustomSound(t){return localStorage.getItem(`sound_${t}`)}static isValidAudioFile(t){const a=["audio/mp3","audio/mpeg","audio/wav","audio/ogg"],s=[".mp3",".wav",".ogg"],e=a.includes(t.type),i=s.some(r=>t.name.toLowerCase().endsWith(r)),o=t.size<=10*1024*1024;return(e||i)&&o}}export{l as S};
