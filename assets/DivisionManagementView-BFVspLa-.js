import{e as Me,r as b,D as Ce,a as Q,o as Ee,g as o,i as a,l as _,t as d,n as G,x as oe,y as le,s as Se,F,k as U,P as X,j as N,G as V,p as $e,z as ue,q as Ge,h as l}from"./vendor-BHPTlv71.js";import{s as v,_ as Pe}from"./index-BEMb2HgI.js";const Be={class:"p-6 min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900"},Ae={class:"max-w-7xl mx-auto"},ze={class:"flex justify-between items-center mb-6"},Fe={class:"flex items-center space-x-4 text-sm"},Ue={class:"text-blue-200"},Ne={class:"text-purple-200"},Ve={class:"flex space-x-3"},je={key:0,class:"text-center py-12"},Oe={key:1,class:"space-y-8"},Re={class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20"},Ie={class:"mb-4 flex items-center space-x-4 text-sm"},Le={class:"text-blue-200"},Ke={class:"ml-4 text-green-200"},Qe={class:"ml-4 text-yellow-200"},He={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},Je=["draggable","onDragstart"],We={class:"font-semibold"},Xe={class:"text-xs opacity-75"},Ye={key:0,class:"text-xs text-green-300 mt-1"},Ze={key:0,class:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20"},et={key:0,class:"space-y-6"},tt={class:"grid md:grid-cols-2 gap-6"},st={class:"flex justify-between items-center mb-4"},at={class:"text-lg font-semibold text-white"},nt={class:"text-xs text-blue-200"},rt={class:"space-y-2"},it=["draggable","onDragstart"],ot={class:"flex justify-between items-center"},lt={class:"flex items-center space-x-3"},ut={key:0,class:"drag-handle"},dt={class:"font-semibold text-white"},ct={class:"text-xs text-blue-200"},mt=["onClick"],_t=["onDragover","onDrop"],vt={key:1,class:"text-center text-yellow-300 text-sm py-4"},gt={key:1,class:"space-y-6"},ft={class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20"},ht={class:"space-y-2 mb-4"},pt=["draggable","onDragstart"],bt={class:"flex justify-between items-center"},xt={class:"flex items-center space-x-3"},yt={key:0,class:"drag-handle"},wt={class:"font-semibold text-white"},kt={class:"text-xs text-blue-200"},qt=["onClick"],Dt={class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20"},Tt={class:"flex justify-between items-center mb-6"},Mt={class:"flex space-x-3"},Ct={key:0,class:"text-center py-8"},Et={key:1,class:"text-center py-8"},St={class:"text-sm text-blue-200"},$t={key:2,class:"space-y-4"},Gt={class:"grid gap-4"},Pt={class:"flex justify-between items-center"},Bt={class:"flex-1"},At={class:"flex items-center space-x-4"},zt={class:"text-sm text-blue-200 font-mono min-w-[80px]"},Ft={class:"flex-1"},Ut={class:"text-white font-semibold"},Nt={class:"text-xs text-white/60 mt-1"},Vt={class:"flex items-center space-x-4"},jt={key:0,class:"text-right"},Ot={class:"text-white font-bold"},Rt={class:"flex space-x-2"},It=["onClick"],Lt=["onClick"],Kt={key:0,class:"text-center pt-4 border-t border-white/10"},Qt={class:"text-sm text-blue-200"},Ht={class:"bg-gradient-to-br from-blue-900 via-purple-900 to-pink-900 rounded-xl p-6 w-full max-w-md mx-4 border border-white/20"},Jt={class:"flex justify-between items-center mb-6"},Wt={key:0,class:"space-y-4"},Xt={class:"bg-white/10 rounded-lg p-4 mb-4"},Yt={class:"text-white font-semibold text-center"},Zt={class:"text-xs text-blue-200 text-center mt-1"},es={class:"space-y-4"},ts={class:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 mt-4"},ss={class:"text-xs text-yellow-200"},as={key:0},ns={key:1},rs=Me({__name:"DivisionManagementView",setup(is){const de=$e();Ge();const i=b(null),g=b(null),C=b([]),D=b([]),x=b([]),Y=b(!0),p=b([]),P=b(!1),B=b(!1),h=b(null),c=Ce({quarters_count:2,quarter_duration_minutes:15,break_duration_minutes:2,halftime_duration_minutes:10}),y=b(null),S=b(null),w=Q(()=>i.value?.max_teams_per_group||4),Z=Q(()=>D.value.filter(t=>R(t.id)).length),ce=Q(()=>x.value.filter(t=>!t.group_id)),me=Q(()=>i.value?.status==="setup"&&x.value.length>=2);function _e(t,e){!t||!e.dataTransfer||(console.log("Drag started for team:",t.name),y.value=t,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id))}function H(){y.value=null,S.value=null}function ee(t){if(!y.value)return;k(t).length<w.value&&(S.value=t)}function te(t){t.relatedTarget&&!t.currentTarget.contains(t.relatedTarget)&&(S.value=null)}async function se(t,e){if(e.preventDefault(),S.value=null,!y.value||!i.value){console.log("No dragged team or tournament");return}const n=y.value;console.log("Dropping team:",n.name,"into group:",t);const s=k(t);if(s.length>=w.value){console.log("Group is full"),alert(`Group is full (${w.value} teams maximum)`),y.value=null;return}try{const r=s.length+1;console.log("Assigning team to position:",r),await ge(n.id,t,r),await I(),console.log("Team assignment successful")}catch(r){console.error("Error in drag and drop:",r),alert("Failed to move team")}y.value=null}function ae(t,e,n,s,r){!t||!r.dataTransfer||(y.value=t,r.dataTransfer.effectAllowed="move",r.dataTransfer.setData("text/plain",t.id))}async function ve(t,e,n){try{const{data:s,error:r}=await v.from("tournament_team_participations").insert([{tournament_id:i.value.id,team_id:t,group_id:e,position_in_group:n}]).select().single();!r&&s&&x.value.push(s)}catch(s){console.error("Error assigning team to group:",s)}}async function ge(t,e,n){if(!i.value)throw new Error("No tournament loaded");try{console.log("Upserting team:",t,"to group:",e,"at position:",n);const{data:s,error:r}=await v.from("tournament_team_participations").select("*").eq("tournament_id",i.value.id).eq("team_id",t).maybeSingle();if(r)throw console.error("Error checking existing participation:",r),r;if(s){const{data:u,error:m}=await v.from("tournament_team_participations").update({group_id:e,position_in_group:n}).eq("id",s.id).select().single();if(m)throw console.error("Error updating team participation:",m),m;console.log("Updated existing participation:",u)}else{const{data:u,error:m}=await v.from("tournament_team_participations").insert({tournament_id:i.value.id,team_id:t,group_id:e,position_in_group:n}).select().single();if(m)throw console.error("Error creating team participation:",m),m;console.log("Created new participation:",u)}}catch(s){throw console.error("Error in upsertTeamInGroup:",s),s}}async function ne(t){try{const{error:e}=await v.from("tournament_team_participations").delete().eq("id",t);e||(x.value=x.value.filter(n=>n.id!==t),await I())}catch(e){console.error("Error removing team from group:",e)}}async function fe(t){await ne(t)}async function he(){if(!i.value||i.value.status!=="setup"){alert("Auto-fill is only available during tournament setup");return}const t=D.value.filter(n=>!R(n.id));if(console.log("Unassigned teams:",t.length),t.length===0){alert("All teams are already assigned");return}if(C.value.length===0){alert("No groups available for assignment");return}if(confirm(`Auto-fill ${t.length} unassigned teams into available group slots?`))try{let n=0,s=0;for(const r of t){let u=0,m=!1;for(;u<C.value.length&&!m;){const T=C.value[n];if(T&&k(T.id).length<w.value){const f=k(T.id).length+1;console.log(`Assigning ${r.name} to ${T.name} at position ${f}`),await ve(r.id,T.id,f),s++,m=!0}n=(n+1)%C.value.length,u++}if(!m){console.log(`Could not assign ${r.name} - all groups are full`);break}}await I(),s>0?alert(`Successfully assigned ${s} teams to groups!`):alert("No teams could be assigned - all groups may be full")}catch(n){console.error("Error in auto-fill teams:",n),alert("Failed to auto-fill teams. Please try again.")}}async function re(){if(!g.value||!i.value){alert("Division or tournament not loaded");return}try{P.value=!0;const{data:t,error:e}=await v.from("tournament_team_participations").select(`
        *,
        teams:team_id (id, name, players),
        tournament_groups:group_id (id, name, division_id)
      `).eq("tournament_id",i.value.id);if(e){console.error("Error fetching team participations:",e),alert("Failed to load team assignments. Please try again.");return}const n=t?.filter(f=>f.tournament_groups?.division_id===g.value.id).map(f=>f.teams)||[];if(n.length<2){alert(`Need at least 2 teams assigned to this division to generate matches. Currently ${n.length} teams assigned.`);return}const{data:s}=await v.from("matches").select("id").eq("division_id",g.value.id).eq("tournament_id",i.value.id);if(s&&s.length>0){if(!confirm(`This division already has ${s.length} matches. Do you want to delete them and generate new ones?`))return;const{error:q}=await v.from("matches").delete().eq("division_id",g.value.id).eq("tournament_id",i.value.id);if(q){console.error("Error deleting existing matches:",q),alert("Failed to delete existing matches. Please try again.");return}}const r=[],u=J({tournament_id:i.value.id,division_id:g.value.id});if(g.value.type==="group")for(let f=0;f<n.length;f++)for(let q=f+1;q<n.length;q++){const A=n[f],M=n[q];!A||!M||r.push({team_a:A.id,team_b:M.id,status:"pending",division_id:g.value.id,tournament_id:i.value.id,match_type:"group",score_a:0,score_b:0,time_left:(()=>{const E=u.quarters_count,W=u.quarter_duration_minutes,L=u.break_duration_minutes,K=u.halftime_duration_minutes,$=E*W;let z=0;return E===1?z=0:E===2?z=K:E>2&&(z=(E-1-1)*L+K),($+z)*60})(),maddie:!1,boosters:{},cards:{},quarters_count:u.quarters_count,quarter_duration_minutes:u.quarter_duration_minutes,break_duration_minutes:u.break_duration_minutes,halftime_duration_minutes:u.halftime_duration_minutes})}else if(g.value.type==="knockout")for(let f=0;f<n.length-1;f+=2){const q=n[f],A=n[f+1];!q||!A||r.push({team_a:q.id,team_b:A.id,status:"pending",division_id:g.value.id,tournament_id:i.value.id,match_type:"knockout",round_number:1,match_order:r.length,score_a:0,score_b:0,time_left:(()=>{const M=u.quarters_count,E=u.quarter_duration_minutes,W=u.break_duration_minutes,L=u.halftime_duration_minutes,K=M*E;let $=0;return M===1?$=0:M===2?$=L:M>2&&($=(M-1-1)*W+L),(K+$)*60})(),maddie:!1,boosters:{},cards:{},quarters_count:u.quarters_count,quarter_duration_minutes:u.quarter_duration_minutes,break_duration_minutes:u.break_duration_minutes,halftime_duration_minutes:u.halftime_duration_minutes})}if(r.length===0){alert("No matches could be generated. Check division configuration and team assignments.");return}const{data:m,error:T}=await v.from("matches").insert(r).select();if(T){console.error("Error saving matches:",T),alert("Failed to save matches to database. Please try again.");return}m&&(p.value=m,console.log(`Generated and saved ${m.length} matches for division: ${g.value.name}`),alert(`Successfully generated ${m.length} matches for ${g.value.name}!`))}catch(t){console.error("Error generating matches:",t),alert("An error occurred while generating matches. Please try again.")}finally{P.value=!1}}async function pe(){if(!(!g.value||!i.value))try{P.value=!0;const{data:t,error:e}=await v.from("matches").select("*").eq("division_id",g.value.id).eq("tournament_id",i.value.id).order("created_at");if(e){console.error("Error loading matches:",e);return}p.value=t||[]}catch(t){console.error("Error refreshing matches:",t)}finally{P.value=!1}}async function be(t){if(confirm("Are you sure you want to delete this match?"))try{const{error:e}=await v.from("matches").delete().eq("id",t);if(e){console.error("Error deleting match:",e),alert("Failed to delete match. Please try again.");return}p.value=p.value.filter(n=>n.id!==t)}catch(e){console.error("Error deleting match:",e),alert("An error occurred while deleting the match.")}}function j(t){return D.value.find(n=>n.id===t)?.name||"Unknown Team"}function ie(t){return t?t.substring(0,5):""}function xe(t){switch(t){case"pending":return"Scheduled";case"active":return"In Progress";case"paused":return"Paused";case"finished":return"Finished";default:return t}}function ye(t){h.value=t,t.start_time&&(t.start_time=ie(t.start_time)||t.start_time);const e=J(t);c.quarters_count=t.quarters_count||e.quarters_count,c.quarter_duration_minutes=t.quarter_duration_minutes||e.quarter_duration_minutes,c.break_duration_minutes=t.break_duration_minutes||e.break_duration_minutes,c.halftime_duration_minutes=t.halftime_duration_minutes||e.halftime_duration_minutes,B.value=!0}function J(t){return t.tournament_id&&i.value?{quarters_count:i.value.quarters_count||2,quarter_duration_minutes:i.value.quarter_duration_minutes||15,break_duration_minutes:i.value.break_duration_minutes||2,halftime_duration_minutes:i.value.halftime_duration_minutes||10}:{quarters_count:2,quarter_duration_minutes:15,break_duration_minutes:2,halftime_duration_minutes:10}}function we(){if(!h.value)return;const t=J(h.value);c.quarters_count=t.quarters_count,c.quarter_duration_minutes=t.quarter_duration_minutes,c.break_duration_minutes=t.break_duration_minutes,c.halftime_duration_minutes=t.halftime_duration_minutes}async function ke(){if(h.value)try{let t=h.value.start_time;t&&t.length===5&&(t=t+":00");const{error:e}=await v.from("matches").update({start_time:t,quarters_count:c.quarters_count,quarter_duration_minutes:c.quarter_duration_minutes,break_duration_minutes:c.break_duration_minutes,halftime_duration_minutes:c.halftime_duration_minutes}).eq("id",h.value.id);if(e){console.error("Error updating match settings:",e),alert("Failed to save match settings. Please try again.");return}const n=p.value.findIndex(s=>s.id===h.value.id);if(n>=0&&p.value[n]){const s=p.value[n];s.start_time=t,s.quarters_count=c.quarters_count,s.quarter_duration_minutes=c.quarter_duration_minutes,s.break_duration_minutes=c.break_duration_minutes,s.halftime_duration_minutes=c.halftime_duration_minutes}B.value=!1,h.value=null,alert("Match settings saved successfully!")}catch(t){console.error("Error saving match settings:",t),alert("An error occurred while saving match settings.")}}function k(t){return x.value.filter(e=>e.group_id===t).sort((e,n)=>(e.position_in_group||0)-(n.position_in_group||0))}function O(t){return D.value.find(e=>e.id===t)}function R(t){return x.value.some(e=>e.team_id===t)}function qe(t){const e=x.value.find(s=>s.team_id===t);return e?e.group_id?C.value.find(s=>s.id===e.group_id)?.name||"Unknown":"Knockout":"Unassigned"}function De(t){switch(t){case"setup":return"bg-yellow-500/20 text-yellow-300";case"active":return"bg-green-500/20 text-green-300";case"finished":return"bg-blue-500/20 text-blue-300";default:return"bg-gray-500/20 text-gray-300"}}async function I(){try{const t=de.params.divisionId,{data:e}=await v.from("tournament_divisions").select("*").eq("id",t).single();e&&(g.value=e);const{data:n}=await v.from("tournaments").select("*").eq("id",e?.tournament_id).single();n&&(i.value=n);const{data:s}=await v.from("tournament_groups").select("*").eq("division_id",t).order("name");s&&(C.value=s);const{data:r}=await v.from("teams").select("*").order("name");r&&(D.value=r);const{data:u}=await v.from("tournament_team_participations").select("*").eq("tournament_id",n?.id);if(u&&(x.value=u),e&&n){const{data:m}=await v.from("matches").select("*").eq("division_id",e.id).eq("tournament_id",n.id).order("created_at");m&&(p.value=m)}}catch(t){console.error("Error loading data:",t)}finally{Y.value=!1}}return Ee(()=>{I()}),(t,e)=>{const n=Se("router-link");return l(),o("div",Be,[a("div",Ae,[a("div",ze,[a("div",null,[e[9]||(e[9]=a("h1",{class:"text-3xl font-bold text-white mb-2"},"Division Management",-1)),a("div",Fe,[a("span",Ue,"Tournament: "+d(i.value?.name),1),a("span",Ne,"Division: "+d(g.value?.name),1),a("div",{class:G(["px-2 py-1 rounded text-xs font-semibold",De(i.value?.status||"setup")])},d(i.value?.status?.toUpperCase()),3)])]),a("div",Ve,[i.value?.status==="setup"?(l(),o("button",{key:0,onClick:he,class:"btn btn-secondary"}," üé≤ Auto Fill Teams ")):_("",!0),me.value?(l(),o("button",{key:1,onClick:re,class:"btn btn-success"}," ‚ö° Generate Matches ")):_("",!0),oe(n,{to:{name:"tournaments-admin"},class:"btn btn-outline"},{default:le(()=>[...e[10]||(e[10]=[ue(" ‚Üê Back to Tournaments ",-1)])]),_:1})])]),Y.value?(l(),o("div",je,[...e[11]||(e[11]=[a("div",{class:"text-white"},"Loading division data...",-1)])])):(l(),o("div",Oe,[a("div",Re,[e[13]||(e[13]=a("h2",{class:"text-xl font-bold text-white mb-4"},"Team Pool",-1)),a("div",Ie,[a("span",Le,"Total teams: "+d(D.value.length),1),a("span",Ke,"Assigned: "+d(Z.value),1),a("span",Qe,"Unassigned: "+d(D.value.length-Z.value),1)]),a("div",He,[(l(!0),o(F,null,U(D.value,s=>(l(),o("div",{key:s.id,class:G(["team-card",{assigned:R(s.id),dragging:y.value?.id===s.id}]),draggable:i.value?.status==="setup",onDragstart:r=>_e(s,r),onDragend:H},[a("div",We,d(s.name),1),a("div",Xe,d(s.players?.length||0)+" players",1),R(s.id)?(l(),o("div",Ye," Assigned to "+d(qe(s.id)),1)):_("",!0)],42,Je))),128))]),i.value?.status==="setup"?(l(),o("div",Ze,[...e[12]||(e[12]=[a("div",{class:"text-blue-200 text-sm"}," üñ±Ô∏è Drag teams from the list above to groups below, or drag teams within groups to reorder them ",-1)])])):_("",!0)]),g.value?.type==="group"?(l(),o("div",et,[a("div",tt,[(l(!0),o(F,null,U(C.value,s=>(l(),o("div",{key:s.id,class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20"},[a("div",st,[a("h3",at,d(s.name),1),a("span",nt,d(k(s.id).length)+"/"+d(w.value)+" teams ",1)]),a("div",rt,[(l(!0),o(F,null,U(k(s.id),(r,u)=>(l(),o("div",{key:r.team_id,class:G(["team-in-group",{dragging:y.value?.id===r.team_id}]),draggable:i.value?.status==="setup",onDragstart:m=>ae(O(r.team_id),r,s.id,r.position_in_group||u,m),onDragend:H},[a("div",ot,[a("div",lt,[i.value?.status==="setup"?(l(),o("div",ut,[...e[14]||(e[14]=[a("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{d:"M7 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})],-1)])])):_("",!0),a("div",null,[a("div",dt,d(O(r.team_id)?.name),1),a("div",ct," Position "+d(r.position_in_group),1)])]),i.value?.status==="setup"?(l(),o("button",{key:0,onClick:m=>ne(r.id),class:"text-red-400 hover:text-red-300 text-sm opacity-70 hover:opacity-100",title:"Remove team"}," ‚úï ",8,mt)):_("",!0)])],42,it))),128)),i.value?.status==="setup"&&k(s.id).length<w.value?(l(),o("div",{key:0,class:G(["drop-zone",{active:S.value===s.id}]),onDragover:X(r=>ee(s.id),["prevent"]),onDragleave:te,onDrop:r=>se(s.id,r)}," Drop teams here ("+d(k(s.id).length)+"/"+d(w.value)+") ",43,_t)):k(s.id).length>=w.value?(l(),o("div",vt," Group is full ("+d(w.value)+" teams) ",1)):_("",!0)])]))),128))])])):g.value?.type==="knockout"?(l(),o("div",gt,[a("div",ft,[e[16]||(e[16]=a("h3",{class:"text-xl font-bold text-white mb-4"},"Knockout Participants",-1)),a("div",ht,[(l(!0),o(F,null,U(ce.value,(s,r)=>(l(),o("div",{key:s.team_id,class:G(["team-in-group knockout-team",{dragging:y.value?.id===s.team_id}]),draggable:i.value?.status==="setup",onDragstart:u=>ae(O(s.team_id),s,"knockout",s.position_in_group||r,u),onDragend:H},[a("div",bt,[a("div",xt,[i.value?.status==="setup"?(l(),o("div",yt,[...e[15]||(e[15]=[a("svg",{class:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[a("path",{d:"M7 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM7 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 2a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4zM13 14a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"})],-1)])])):_("",!0),a("div",null,[a("div",wt,d(O(s.team_id)?.name),1),a("div",kt," Seed "+d(s.position_in_group),1)])]),i.value?.status==="setup"?(l(),o("button",{key:0,onClick:u=>fe(s.id),class:"text-red-400 hover:text-red-300 text-sm opacity-70 hover:opacity-100",title:"Remove team"}," ‚úï ",8,qt)):_("",!0)])],42,pt))),128)),i.value?.status==="setup"?(l(),o("div",{key:0,class:G(["drop-zone",{active:S.value==="knockout"}]),onDragover:e[0]||(e[0]=X(s=>ee("knockout"),["prevent"])),onDragleave:te,onDrop:e[1]||(e[1]=s=>se("knockout",s))}," Drop teams here for knockout bracket ",34)):_("",!0)])])])):_("",!0),a("div",Dt,[a("div",Tt,[e[17]||(e[17]=a("h2",{class:"text-xl font-bold text-white"},"Match Schedule",-1)),a("div",Mt,[i.value?.status==="setup"&&x.value.length>=2?(l(),o("button",{key:0,onClick:re,class:"btn btn-primary"}," ÔøΩ Generate Schedule ")):_("",!0),p.value.length>0?(l(),o("button",{key:1,onClick:pe,class:"btn btn-secondary"}," üîÑ Refresh ")):_("",!0)])]),P.value?(l(),o("div",Ct,[...e[18]||(e[18]=[a("div",{class:"text-white/60"},"Loading matches...",-1)])])):p.value.length===0?(l(),o("div",Et,[e[19]||(e[19]=a("div",{class:"text-white/60 mb-4"},"No matches scheduled yet",-1)),a("div",St,d(x.value.length>=2?'Click "Generate Schedule" to create matches':"Assign at least 2 teams to generate matches"),1)])):(l(),o("div",$t,[a("div",Gt,[(l(!0),o(F,null,U(p.value,(s,r)=>(l(),o("div",{key:s.id,class:"bg-white/5 rounded-lg p-4 border border-white/10 hover:border-white/20 transition-colors"},[a("div",Pt,[a("div",Bt,[a("div",At,[a("div",zt,d(ie(s.start_time)||`Match ${r+1}`),1),a("div",Ft,[a("div",Ut,d(j(s.team_a))+" vs "+d(j(s.team_b)),1),a("div",Nt,d(s.match_type||"Friendly")+" ‚Ä¢ "+d(xe(s.status)),1)])])]),a("div",Vt,[s.status==="finished"?(l(),o("div",jt,[a("div",Ot,d(s.score_a)+" - "+d(s.score_b),1)])):_("",!0),a("div",Rt,[oe(n,{to:{name:"match-control",params:{id:s.id}},class:"btn btn-xs btn-primary",title:"Control Match"},{default:le(()=>[...e[20]||(e[20]=[ue(" üéÆ ",-1)])]),_:1},8,["to"]),i.value?.status==="setup"?(l(),o("button",{key:0,onClick:u=>ye(s),class:"btn btn-xs bg-blue-600 hover:bg-blue-700 text-white",title:"Edit Match Settings"}," ‚öôÔ∏è ",8,It)):_("",!0),i.value?.status==="setup"?(l(),o("button",{key:1,onClick:u=>be(s.id),class:"btn btn-xs bg-red-600 hover:bg-red-700 text-white",title:"Delete Match"}," üóëÔ∏è ",8,Lt)):_("",!0)])])])]))),128))]),p.value.length>0?(l(),o("div",Kt,[a("div",Qt," Total matches: "+d(p.value.length)+" ‚Ä¢ Finished: "+d(p.value.filter(s=>s.status==="finished").length),1)])):_("",!0)]))])]))]),B.value?(l(),o("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e[8]||(e[8]=X(s=>B.value=!1,["self"]))},[a("div",Ht,[a("div",Jt,[e[21]||(e[21]=a("h3",{class:"text-xl font-bold text-white"},"Match Settings",-1)),a("button",{onClick:e[2]||(e[2]=s=>B.value=!1),class:"text-white/60 hover:text-white text-xl"}," √ó ")]),h.value?(l(),o("div",Wt,[a("div",Xt,[a("div",Yt,d(j(h.value.team_a))+" vs "+d(j(h.value.team_b)),1),a("div",Zt,d(h.value.match_type||"Friendly")+" Match ",1)]),a("div",es,[a("div",null,[e[22]||(e[22]=a("label",{class:"block text-sm font-medium text-blue-200 mb-2"}," Match Start Time ",-1)),N(a("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>h.value.start_time=s),type:"time",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,h.value.start_time]]),e[23]||(e[23]=a("div",{class:"text-xs text-white/60 mt-1"},"Time when the match starts",-1))]),a("div",null,[e[24]||(e[24]=a("label",{class:"block text-sm font-medium text-blue-200 mb-2"}," Quarters ",-1)),N(a("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>c.quarters_count=s),type:"number",min:"1",max:"10",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.quarters_count,void 0,{number:!0}]]),e[25]||(e[25]=a("div",{class:"text-xs text-white/60 mt-1"},"Default: 2 quarters",-1))]),a("div",null,[e[26]||(e[26]=a("label",{class:"block text-sm font-medium text-blue-200 mb-2"}," Quarter Length (minutes) ",-1)),N(a("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>c.quarter_duration_minutes=s),type:"number",min:"1",max:"60",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.quarter_duration_minutes,void 0,{number:!0}]]),e[27]||(e[27]=a("div",{class:"text-xs text-white/60 mt-1"},"Default: 15 minutes per quarter",-1))]),a("div",null,[e[28]||(e[28]=a("label",{class:"block text-sm font-medium text-blue-200 mb-2"}," Break Time (minutes) ",-1)),N(a("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>c.break_duration_minutes=s),type:"number",min:"0",max:"30",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.break_duration_minutes,void 0,{number:!0}]]),e[29]||(e[29]=a("div",{class:"text-xs text-white/60 mt-1"},"Default: 2 minutes between quarters",-1))]),a("div",null,[e[30]||(e[30]=a("label",{class:"block text-sm font-medium text-blue-200 mb-2"}," Halftime (minutes) ",-1)),N(a("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>c.halftime_duration_minutes=s),type:"number",min:"0",max:"60",class:"w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[V,c.halftime_duration_minutes,void 0,{number:!0}]]),e[31]||(e[31]=a("div",{class:"text-xs text-white/60 mt-1"},"Default: 10 minutes at halftime",-1))])]),a("div",ts,[a("div",ss,[e[32]||(e[32]=a("div",{class:"font-semibold mb-1"},"Settings Source:",-1)),h.value.tournament_id?(l(),o("div",as," üèÜ Tournament defaults applied ‚Ä¢ Can be customized per match ")):(l(),o("div",ns," ‚ö° Standalone match ‚Ä¢ Using standard defaults "))])]),a("div",{class:"flex space-x-3 pt-4"},[a("button",{onClick:we,class:"flex-1 btn btn-secondary"}," Reset to Defaults "),a("button",{onClick:ke,class:"flex-1 btn btn-primary"}," Save Settings ")])])):_("",!0)])])):_("",!0)])}}}),ds=Pe(rs,[["__scopeId","data-v-56aa64c9"]]);export{ds as default};
