import{e as Q,B as X,r as u,o as Z,g as i,i as t,l as f,t as r,n as U,F as C,k as S,P as T,j as c,G as p,H as ee,I as W,h as a}from"./vendor-BHPTlv71.js";import{s as m,_ as te}from"./index-BEMb2HgI.js";import{S as b}from"./soundManager-CcbvAGRv.js";const oe={class:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900"},se={class:"container mx-auto px-4 py-8"},le={class:"mb-8"},ne={class:"text-4xl font-bold text-white mb-2"},re={class:"text-blue-100"},ie={class:"flex space-x-1 mb-8"},ae={key:0,class:"space-y-6"},de={class:"flex justify-between items-center"},ue={key:0,class:"text-center py-8"},ce={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},pe={class:"flex items-start justify-between mb-4"},be={class:"flex items-center space-x-3"},fe={class:"text-3xl"},me={class:"text-lg font-bold text-white"},ve={class:"text-blue-200 text-sm"},xe={class:"space-y-2 mb-4"},ge={class:"flex items-center justify-between text-sm"},ye={class:"text-white font-mono"},we={class:"flex items-center justify-between text-sm"},_e={class:"flex items-center justify-between text-sm"},he={class:"flex items-center space-x-2"},ke={class:"text-white text-xs"},Ce=["onClick"],Se={class:"flex space-x-2"},$e=["onClick"],Ee=["onClick"],Me={key:1,class:"space-y-6"},Pe={class:"flex justify-between items-center"},Ue={key:0,class:"text-center py-8"},Be={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Ve={class:"flex items-start justify-between mb-4"},Ae={class:"flex items-center space-x-3"},je={class:"text-3xl"},De={class:"text-lg font-bold text-white"},Ne={class:"text-blue-200 text-sm"},qe={class:"space-y-2 mb-4"},Le={class:"flex items-center justify-between text-sm"},Ie={class:"text-white font-mono"},Re={class:"flex items-center justify-between text-sm"},Te={class:"flex items-center space-x-2"},We={class:"text-white text-xs"},ze=["onClick"],Ge={class:"flex space-x-2"},Oe=["onClick"],Fe=["onClick"],He={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Ye={class:"bg-white rounded-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto"},Je={class:"text-2xl font-bold text-gray-900 mb-6"},Ke={class:"flex items-center space-x-2"},Qe=["value"],Xe={class:"mt-2"},Ze=["disabled"],et={key:0,class:"mt-2 flex items-center space-x-2"},tt={class:"text-xs text-gray-500"},ot={class:"flex space-x-3 pt-4"},st={type:"submit",class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold transition-colors"},lt={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},nt={class:"bg-white rounded-xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto"},rt={class:"text-2xl font-bold text-gray-900 mb-6"},it=["value"],at={class:"mt-2"},dt=["disabled"],ut={key:0,class:"mt-2 flex items-center space-x-2"},ct={class:"text-xs text-gray-500"},pt={class:"flex space-x-3 pt-4"},bt={type:"submit",class:"flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg font-semibold transition-colors"},ft=Q({__name:"BoostersAdminView",setup(mt){const{t:vt}=X(),B=u([]),V=u([]),h=u(!0),g=u("boosters"),y=u(!1),w=u(!1),v=u(null),x=u(null),A=u([]),j=u([]),k=u(!1),l=u({title:"",description:"",icon:"",picture:"",sound_file:"",has_countdown:!0,duration:60}),n=u({title:"",description:"",icon:"",picture:"",sound_file:"",duration:60}),$=()=>{l.value={title:"",description:"",icon:"",picture:"",sound_file:"",has_countdown:!0,duration:60},v.value=null},E=()=>{n.value={title:"",description:"",icon:"",picture:"",sound_file:"",duration:60},x.value=null};async function M(){const{data:s,error:e}=await m.from("boosters").select("*").order("created_at",{ascending:!1});if(e){console.error("Error loading boosters:",e);return}B.value=s||[]}async function P(){const{data:s,error:e}=await m.from("maddies").select("*").order("created_at",{ascending:!1});if(e){console.error("Error loading maddies:",e);return}V.value=s||[]}async function z(){h.value=!0,await Promise.all([M(),P()]),h.value=!1}function D(s){const e=s==="boosters"?["booster_1.mp3","booster_2.mp3","booster_3.mp3","booster_4.mp3"]:["maddie_1.mp3","maddie_2.mp3","maddie_3.mp3","maddie_4.mp3"],o=Math.floor(Math.random()*e.length);return e[o]}function N(s){return s?s.startsWith("custom_")?"Custom sound":s.replace(".mp3","").replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"No sound"}async function q(s,e="boosters"){if(s)try{if(s.startsWith("custom_")){const o=b.getCustomSound(s);o&&await b.playSound(o)}else await b.playSound(`/sounds/${e}/${s}`)}catch(o){console.error("Error playing sound preview:",o)}}async function G(){try{const s=l.value.sound_file||D("boosters");if(v.value){const{error:e}=await m.from("boosters").update({title:l.value.title,description:l.value.description,icon:l.value.icon||null,picture:l.value.picture||null,sound_file:s,has_countdown:l.value.has_countdown,duration:l.value.duration}).eq("id",v.value.id);if(e)throw e}else{const{error:e}=await m.from("boosters").insert({title:l.value.title,description:l.value.description,icon:l.value.icon||null,picture:l.value.picture||null,sound_file:s,has_countdown:l.value.has_countdown,duration:l.value.duration});if(e)throw e}y.value=!1,$(),await M()}catch(s){console.error("Error saving booster:",s),alert("Error saving booster. Please try again.")}}async function O(){try{const s=n.value.sound_file||D("maddies");if(x.value){const{error:e}=await m.from("maddies").update({title:n.value.title,description:n.value.description,icon:n.value.icon||null,picture:n.value.picture||null,sound_file:s,duration:n.value.duration}).eq("id",x.value.id);if(e)throw e}else{const{error:e}=await m.from("maddies").insert({title:n.value.title,description:n.value.description,icon:n.value.icon||null,picture:n.value.picture||null,sound_file:s,duration:n.value.duration});if(e)throw e}w.value=!1,E(),await P()}catch(s){console.error("Error saving maddie:",s),alert("Error saving maddie. Please try again.")}}function F(s){v.value=s,l.value={title:s.title,description:s.description,icon:s.icon||"",picture:s.picture||"",sound_file:s.sound_file||"",has_countdown:s.has_countdown,duration:s.duration},y.value=!0}function H(s){x.value=s,n.value={title:s.title,description:s.description,icon:s.icon||"",picture:s.picture||"",sound_file:s.sound_file||"",duration:s.duration},w.value=!0}async function Y(s){if(confirm("Are you sure you want to delete this booster?"))try{const{error:e}=await m.from("boosters").delete().eq("id",s);if(e)throw e;await M()}catch(e){console.error("Error deleting booster:",e),alert("Error deleting booster. Please try again.")}}async function J(s){if(confirm("Are you sure you want to delete this maddie?"))try{const{error:e}=await m.from("maddies").delete().eq("id",s);if(e)throw e;await P()}catch(e){console.error("Error deleting maddie:",e),alert("Error deleting maddie. Please try again.")}}const L=s=>{if(s<60)return`${s}s`;const e=Math.floor(s/60),o=s%60;return o===0?`${e}m`:`${e}m ${o}s`};async function K(){try{const[s,e]=await Promise.all([b.getAvailableSounds("boosters"),b.getAvailableSounds("maddies")]);A.value=s,j.value=e}catch(s){console.error("Error loading available sounds:",s)}}async function I(s,e){const d=s.target.files?.[0];if(d){if(!b.isValidAudioFile(d)){alert("Please select a valid audio file (MP3, WAV, OGG) under 10MB");return}try{k.value=!0;const _=e==="boosters"?v.value?.id||"new":x.value?.id||"new",xt=await b.uploadCustomSound(d,e,_);e==="boosters"?l.value.sound_file=`custom_${e}_${_}_${d.name}`:n.value.sound_file=`custom_${e}_${_}_${d.name}`,console.log("âœ… Sound uploaded successfully:",d.name)}catch(_){console.error("Error uploading sound:",_),alert("Error uploading sound file. Please try again.")}finally{k.value=!1}}}async function R(s,e){if(s)try{let o;if(s.startsWith("custom_")){const d=b.getCustomSound(s);if(d)o=d;else{console.error("Custom sound not found:",s);return}}else o=`/sounds/${e}/${s}`;await b.playSound(o,.5)}catch(o){console.error("Error previewing sound:",o)}}return Z(async()=>{await Promise.all([z(),K()])}),(s,e)=>(a(),i("div",oe,[t("div",se,[t("div",le,[t("h1",ne,r(s.$t("boostersAdmin.title")),1),t("p",re,r(s.$t("boostersAdmin.subtitle")),1)]),t("div",ie,[t("button",{onClick:e[0]||(e[0]=o=>g.value="boosters"),class:U(["px-6 py-3 rounded-lg font-semibold transition-all duration-200",g.value==="boosters"?"bg-blue-600 text-white shadow-lg":"bg-white/10 text-blue-200 hover:bg-white/20"])},r(s.$t("boostersAdmin.tabs.boosters")),3),t("button",{onClick:e[1]||(e[1]=o=>g.value="maddies"),class:U(["px-6 py-3 rounded-lg font-semibold transition-all duration-200",g.value==="maddies"?"bg-purple-600 text-white shadow-lg":"bg-white/10 text-blue-200 hover:bg-white/20"])},r(s.$t("boostersAdmin.tabs.maddies")),3)]),g.value==="boosters"?(a(),i("div",ae,[t("div",de,[e[23]||(e[23]=t("h2",{class:"text-2xl font-bold text-white"},"Boosters",-1)),t("button",{onClick:e[2]||(e[2]=o=>{y.value=!0,$()}),class:"btn btn-primary"}," + Add Booster ")]),h.value?(a(),i("div",ue,[...e[24]||(e[24]=[t("div",{class:"text-white text-xl"},"Loading boosters...",-1)])])):(a(),i("div",ce,[(a(!0),i(C,null,S(B.value,o=>(a(),i("div",{key:o.id,class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300"},[t("div",pe,[t("div",be,[t("div",fe,r(o.icon||"âš¡"),1),t("div",null,[t("h3",me,r(o.title),1),t("p",ve,r(o.description),1)])])]),t("div",xe,[t("div",ge,[e[25]||(e[25]=t("span",{class:"text-blue-300"},"Duration:",-1)),t("span",ye,r(L(o.duration)),1)]),t("div",we,[e[26]||(e[26]=t("span",{class:"text-blue-300"},"Countdown:",-1)),t("span",{class:U(o.has_countdown?"text-green-400":"text-red-400")},r(o.has_countdown?"Yes":"No"),3)]),t("div",_e,[e[27]||(e[27]=t("span",{class:"text-blue-300"},"Sound:",-1)),t("div",he,[t("span",ke,r(N(o.sound_file)),1),o.sound_file?(a(),i("button",{key:0,onClick:d=>q(o.sound_file,"boosters"),class:"text-blue-400 hover:text-blue-300 text-xs",title:"Play sound"}," ðŸ”Š ",8,Ce)):f("",!0)])])]),t("div",Se,[t("button",{onClick:d=>F(o),class:"flex-1 py-2 px-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors"}," Edit ",8,$e),t("button",{onClick:d=>Y(o.id),class:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-semibold transition-colors"}," Delete ",8,Ee)])]))),128))]))])):f("",!0),g.value==="maddies"?(a(),i("div",Me,[t("div",Pe,[e[28]||(e[28]=t("h2",{class:"text-2xl font-bold text-white"},"Maddies",-1)),t("button",{onClick:e[3]||(e[3]=o=>{w.value=!0,E()}),class:"btn btn-primary"}," + Add Maddie ")]),h.value?(a(),i("div",Ue,[...e[29]||(e[29]=[t("div",{class:"text-white text-xl"},"Loading maddies...",-1)])])):(a(),i("div",Be,[(a(!0),i(C,null,S(V.value,o=>(a(),i("div",{key:o.id,class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300"},[t("div",Ve,[t("div",Ae,[t("div",je,r(o.icon||"âœ¨"),1),t("div",null,[t("h3",De,r(o.title),1),t("p",Ne,r(o.description),1)])])]),t("div",qe,[t("div",Le,[e[30]||(e[30]=t("span",{class:"text-blue-300"},"Duration:",-1)),t("span",Ie,r(L(o.duration)),1)]),t("div",Re,[e[31]||(e[31]=t("span",{class:"text-blue-300"},"Sound:",-1)),t("div",Te,[t("span",We,r(N(o.sound_file)),1),o.sound_file?(a(),i("button",{key:0,onClick:d=>q(o.sound_file,"maddies"),class:"text-blue-400 hover:text-blue-300 text-xs",title:"Play sound"}," ðŸ”Š ",8,ze)):f("",!0)])])]),t("div",Ge,[t("button",{onClick:d=>H(o),class:"flex-1 py-2 px-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-semibold transition-colors"}," Edit ",8,Oe),t("button",{onClick:d=>J(o.id),class:"flex-1 py-2 px-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-semibold transition-colors"}," Delete ",8,Fe)])]))),128))]))])):f("",!0)]),y.value?(a(),i("div",He,[t("div",Ye,[t("h2",Je,r(v.value?"Edit Booster":"Add New Booster"),1),t("form",{onSubmit:T(G,["prevent"]),class:"space-y-4"},[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Title *",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Power Play"},null,512),[[p,l.value.title]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Description *",-1)),c(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.description=o),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe what this booster does..."},null,512),[[p,l.value.description]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Icon/Emoji",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.icon=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"âš¡ (emoji or URL)"},null,512),[[p,l.value.icon]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Picture URL",-1)),c(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.picture=o),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/image.png"},null,512),[[p,l.value.picture]])]),t("div",null,[t("label",Ke,[c(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.has_countdown=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[ee,l.value.has_countdown]]),e[36]||(e[36]=t("span",{class:"text-sm font-semibold text-gray-700"},"Enable countdown during effect",-1))]),e[37]||(e[37]=t("p",{class:"text-xs text-gray-500 mt-1"},' Uncheck for instant effects like "Coach Stroke" where time stops ',-1))]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Duration (seconds) *",-1)),c(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.duration=o),type:"number",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"60"},null,512),[[p,l.value.duration,void 0,{number:!0}]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Sound Effect",-1)),c(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.sound_file=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mb-2"},[e[39]||(e[39]=t("option",{value:""},"No sound",-1)),(a(!0),i(C,null,S(A.value,o=>(a(),i("option",{key:o.name,value:o.name},r(o.displayName),9,Qe))),128))],512),[[W,l.value.sound_file]]),t("div",Xe,[e[40]||(e[40]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Or upload custom sound:",-1)),t("input",{type:"file",accept:"audio/*",onChange:e[11]||(e[11]=o=>I(o,"boosters")),disabled:k.value,class:"w-full text-sm text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,40,Ze)]),l.value.sound_file?(a(),i("div",et,[t("button",{type:"button",onClick:e[12]||(e[12]=o=>R(l.value.sound_file,"boosters")),class:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"}," ðŸ”Š Preview "),t("span",tt,r(l.value.sound_file),1)])):f("",!0)]),t("div",ot,[t("button",st,r(v.value?"Update":"Create"),1),t("button",{type:"button",onClick:e[13]||(e[13]=o=>{y.value=!1,$()}),class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-semibold transition-colors"}," Cancel ")])],32)])])):f("",!0),w.value?(a(),i("div",lt,[t("div",nt,[t("h2",rt,r(x.value?"Edit Maddie":"Add New Maddie"),1),t("form",{onSubmit:T(O,["prevent"]),class:"space-y-4"},[t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Title *",-1)),c(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>n.value.title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., Maddie Magic"},null,512),[[p,n.value.title]])]),t("div",null,[e[43]||(e[43]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Description *",-1)),c(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=o=>n.value.description=o),required:"",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"Describe what this maddie does..."},null,512),[[p,n.value.description]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Icon/Emoji",-1)),c(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>n.value.icon=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"âœ¨ (emoji or URL)"},null,512),[[p,n.value.icon]])]),t("div",null,[e[45]||(e[45]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Picture URL",-1)),c(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>n.value.picture=o),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"https://example.com/image.png"},null,512),[[p,n.value.picture]])]),t("div",null,[e[46]||(e[46]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Duration (seconds) *",-1)),c(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>n.value.duration=o),type:"number",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"60"},null,512),[[p,n.value.duration,void 0,{number:!0}]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Sound Effect",-1)),c(t("select",{"onUpdate:modelValue":e[19]||(e[19]=o=>n.value.sound_file=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 mb-2"},[e[47]||(e[47]=t("option",{value:""},"No sound",-1)),(a(!0),i(C,null,S(j.value,o=>(a(),i("option",{key:o.name,value:o.name},r(o.displayName),9,it))),128))],512),[[W,n.value.sound_file]]),t("div",at,[e[48]||(e[48]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Or upload custom sound:",-1)),t("input",{type:"file",accept:"audio/*",onChange:e[20]||(e[20]=o=>I(o,"maddies")),disabled:k.value,class:"w-full text-sm text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"},null,40,dt)]),n.value.sound_file?(a(),i("div",ut,[t("button",{type:"button",onClick:e[21]||(e[21]=o=>R(n.value.sound_file,"maddies")),class:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded transition-colors"}," ðŸ”Š Preview "),t("span",ct,r(n.value.sound_file),1)])):f("",!0)]),t("div",pt,[t("button",bt,r(x.value?"Update":"Create"),1),t("button",{type:"button",onClick:e[22]||(e[22]=o=>{w.value=!1,E()}),class:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg font-semibold transition-colors"}," Cancel ")])],32)])])):f("",!0)]))}}),_t=te(ft,[["__scopeId","data-v-1a875a9d"]]);export{_t as default};
