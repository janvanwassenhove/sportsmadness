import{e as j,r as m,o as V,g as o,i as e,l as b,F as f,k as w,t as i,j as c,G as g,n as U,I as C,h as n}from"./vendor-BHPTlv71.js";import{s as v}from"./index-BEMb2HgI.js";const D={class:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900"},M={class:"container mx-auto px-4 py-8"},$={key:0,class:"text-center py-16"},q={key:1,class:"text-center py-16"},B={key:2,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},G={class:"flex justify-between items-start mb-4"},z={class:"text-xl font-bold text-white"},K={class:"flex space-x-2"},L=["onClick"],R=["onClick"],S={class:"text-blue-200 mb-4"},I={class:"space-y-2 max-h-40 overflow-y-auto"},J={class:"flex items-center space-x-2"},Y={class:"text-white font-medium"},H={class:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-300"},O={key:0,class:"text-right"},Q={class:"text-yellow-400"},W={class:"text-blue-300 text-xs"},X={key:1,class:"text-right"},Z={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ee={class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},te={class:"flex justify-between items-center mb-6"},se={class:"text-2xl font-bold text-white"},le={class:"mb-6"},ae={class:"mb-6 bg-white/5 rounded-lg p-4"},oe={key:0},ne={key:1},re={class:"mb-6"},ie={class:"text-lg font-semibold text-white mb-4"},de={key:0,class:"text-center py-8 text-blue-200"},ue={key:1,class:"space-y-2 max-h-60 overflow-y-auto"},me={class:"flex items-center space-x-4"},ce={key:0,class:"text-yellow-400 font-bold"},pe={key:1,class:"text-blue-400 font-bold"},be={class:"text-white font-medium"},ve={class:"flex items-center space-x-2 text-sm"},xe={key:0,class:"text-blue-300"},ye={class:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-300"},he=["onClick"],fe={class:"flex justify-end space-x-4"},Ce=j({__name:"TeamsAdminView",setup(we){const x=m([]),_=m(!0),p=m(!1),u=m(null),r=m({name:"",players:[]}),a=m({name:"",number:1,position:"Forward",type:"Player"});async function y(){try{const{data:s,error:t}=await v.from("teams").select("*").order("name");if(t){console.error("Error loading teams:",t);return}x.value=s||[]}catch(s){console.error("Error loading teams:",s)}finally{_.value=!1}}function k(){u.value=null,r.value={name:"",players:[]},p.value=!0}function T(s){u.value=s,r.value={name:s.name,players:[...s.players]},p.value=!0}function h(){p.value=!1,u.value=null,r.value={name:"",players:[]},a.value={name:"",number:1,position:"Forward",type:"Player"}}function E(){if(!a.value.name)return;if(a.value.type!=="Coach"&&r.value.players.some(t=>t.number===a.value.number)){alert("Player number already exists");return}const s={name:a.value.name,type:a.value.type};a.value.type!=="Coach"&&(s.number=a.value.number,s.position=a.value.position),r.value.players.push(s),a.value={name:"",number:N(),position:"Forward",type:"Player"}}function P(s){r.value.players.splice(s,1)}function N(){const s=r.value.players.map(t=>t.number);for(let t=1;t<=99;t++)if(!s.includes(t))return t;return 1}async function F(){if(!r.value.name||r.value.players.length===0){alert("Please provide team name and at least one player");return}try{if(u.value){const{error:s}=await v.from("teams").update({name:r.value.name,players:r.value.players}).eq("id",u.value.id);if(s){console.error("Error updating team:",s),alert("Error updating team");return}}else{const{error:s}=await v.from("teams").insert({name:r.value.name,players:r.value.players});if(s){console.error("Error creating team:",s),alert("Error creating team");return}}await y(),h()}catch(s){console.error("Error saving team:",s),alert("Error saving team")}}async function A(s){if(confirm(`Are you sure you want to delete ${s.name}?`))try{const{error:t}=await v.from("teams").delete().eq("id",s.id);if(t){console.error("Error deleting team:",t),alert("Error deleting team");return}await y()}catch(t){console.error("Error deleting team:",t),alert("Error deleting team")}}return V(()=>{y()}),(s,t)=>(n(),o("div",D,[e("div",M,[e("div",{class:"flex justify-between items-center mb-8"},[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-4xl font-bold text-white mb-2"},"Teams Management"),e("p",{class:"text-blue-100"},"Manage tournament teams and players")],-1)),e("button",{onClick:k,class:"btn btn-primary"}," + Add Team ")]),_.value?(n(),o("div",$,[...t[6]||(t[6]=[e("div",{class:"text-4xl font-bold text-white animate-pulse"},"Loading teams...",-1)])])):x.value.length===0?(n(),o("div",q,[t[7]||(t[7]=e("div",{class:"text-6xl mb-6"},"ï¿½",-1)),t[8]||(t[8]=e("h2",{class:"text-3xl font-bold text-white mb-4"},"No Teams Yet",-1)),t[9]||(t[9]=e("p",{class:"text-blue-200 mb-8"},"Create your first team to get started",-1)),e("button",{onClick:k,class:"btn btn-primary"}," + Create First Team ")])):(n(),o("div",B,[(n(!0),o(f,null,w(x.value,l=>(n(),o("div",{key:l.id,class:"bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20"},[e("div",G,[e("h3",z,i(l.name),1),e("div",K,[e("button",{onClick:d=>T(l),class:"btn btn-secondary text-sm"}," âœï¸ Edit ",8,L),e("button",{onClick:d=>A(l),class:"btn btn-danger text-sm"}," ğŸ—‘ï¸ Delete ",8,R)])]),e("div",S,i(l.players.length)+" players ",1),e("div",I,[(n(!0),o(f,null,w(l.players,d=>(n(),o("div",{key:d.name,class:"flex justify-between items-center bg-white/5 rounded p-2 text-sm"},[e("div",J,[e("span",Y,i(d.name),1),e("span",H,i(d.type),1)]),d.type!=="Coach"?(n(),o("div",O,[e("div",Q,"#"+i(d.number),1),e("div",W,i(d.position),1)])):(n(),o("div",X,[...t[10]||(t[10]=[e("div",{class:"text-blue-400 text-xs"},"ğŸ‘” Coach",-1)])]))]))),128))])]))),128))]))]),p.value?(n(),o("div",Z,[e("div",ee,[e("div",te,[e("h2",se,i(u.value?"Edit Team":"Add New Team"),1),e("button",{onClick:h,class:"text-white hover:text-red-400"}," âœ• ")]),e("div",le,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-white mb-2"}," Team Name ",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.value.name=l),type:"text",class:"input bg-white/10 text-white placeholder-blue-200 border-white/20",placeholder:"Enter team name",required:""},null,512),[[g,r.value.name]])]),e("div",ae,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-white mb-4"},"Add Player",-1)),e("div",{class:U(["grid gap-4 mb-4",a.value.type==="Coach"?"md:grid-cols-2":"md:grid-cols-4"])},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-white mb-2"}," Player Name ",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.name=l),type:"text",class:"input bg-white/10 text-white placeholder-blue-200 border-white/20",placeholder:"Player name"},null,512),[[g,a.value.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-white mb-2"}," Type ",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.type=l),class:"input bg-white/10 text-white border-white/20"},[...t[13]||(t[13]=[e("option",{value:"Player"},"Player",-1),e("option",{value:"Coach"},"Coach",-1),e("option",{value:"Keeper"},"Keeper",-1)])],512),[[C,a.value.type]])]),a.value.type!=="Coach"?(n(),o("div",oe,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-white mb-2"}," Jersey Number ",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.number=l),type:"number",min:"1",max:"99",class:"input bg-white/10 text-white placeholder-blue-200 border-white/20"},null,512),[[g,a.value.number,void 0,{number:!0}]])])):b("",!0),a.value.type!=="Coach"?(n(),o("div",ne,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-white mb-2"}," Position ",-1)),c(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.position=l),class:"input bg-white/10 text-white border-white/20"},[...t[16]||(t[16]=[e("option",{value:"Forward"},"Forward",-1),e("option",{value:"Defense"},"Defense",-1),e("option",{value:"Goalie"},"Goalie",-1)])],512),[[C,a.value.position]])])):b("",!0)],2),e("button",{onClick:E,class:"btn btn-primary"}," + Add Player ")]),e("div",re,[e("h3",ie," Team Roster ("+i(r.value.players.length)+" players) ",1),r.value.players.length===0?(n(),o("div",de," No players added yet ")):(n(),o("div",ue,[(n(!0),o(f,null,w(r.value.players,(l,d)=>(n(),o("div",{key:d,class:"flex justify-between items-center bg-white/5 rounded p-3"},[e("div",me,[l.type!=="Coach"?(n(),o("div",ce,"#"+i(l.number),1)):(n(),o("div",pe,"ğŸ‘”")),e("div",null,[e("div",be,i(l.name),1),e("div",ve,[l.type!=="Coach"?(n(),o("span",xe,i(l.position),1)):b("",!0),e("span",ye,i(l.type),1)])])]),e("button",{onClick:ge=>P(d),class:"text-red-400 hover:text-red-300"}," ğŸ—‘ï¸ Remove ",8,he)]))),128))]))]),e("div",fe,[e("button",{onClick:h,class:"btn btn-secondary"}," Cancel "),e("button",{onClick:F,class:"btn btn-primary"},i(u.value?"Update Team":"Create Team"),1)])])])):b("",!0)]))}});export{Ce as default};
